æœ¬æŒ‡å—å°†æ•™ä½ å¦‚ä½•åœ¨PyCharmä¸­ä½¿ç”¨DeepSeekæ¨¡å‹å®è·µLangChainæ™ºèƒ½ä½“çš„æ‰€æœ‰å†…å®¹ï¼Œé€‚åˆæ–°æ‰‹å°ç™½ã€‚æˆ‘ä»¬å°†æŒ‰ç…§æ•™ç¨‹çš„ç»“æ„ï¼Œé€æ­¥å®ç°æ™ºèƒ½ä½“çš„åˆ›å»ºã€å·¥å…·ä½¿ç”¨å’Œé«˜çº§åŠŸèƒ½ã€‚  
æœ¬èŠ‚å†…å®¹å¯¹åº”å®˜æ–¹æ–‡æ¡£ï¼š[https://langchain-doc.cn/v1/python/langchain/agents.html](https://langchain-doc.cn/v1/python/langchain/agents.html)

## ä¸€ã€åœ¨PyCharmä¸­åˆ›å»ºæ–°é¡¹ç›®
### æ­¥éª¤1ï¼šæ‰“å¼€PyCharm
### æ­¥éª¤2ï¼šåˆ›å»ºæ–°é¡¹ç›®
1. ç‚¹å‡» "New Project"
2. é€‰æ‹©é¡¹ç›®ä½ç½®ï¼ˆä¾‹å¦‚ï¼š`D:\Projects\LangChainAgentDemo`ï¼‰
3. é€‰æ‹©Pythonè§£é‡Šå™¨ï¼ˆå»ºè®®ä½¿ç”¨Python 3.9+ï¼‰
4. ç‚¹å‡» "Create" åˆ›å»ºé¡¹ç›®

## äºŒã€å®‰è£…LangChainç›¸å…³ä¾èµ–åŒ…
### æ­¥éª¤1ï¼šæ‰“å¼€ç»ˆç«¯
åœ¨PyCharmä¸­ï¼Œç‚¹å‡»åº•éƒ¨çš„ "Terminal" æ ‡ç­¾æ‰“å¼€ç»ˆç«¯ã€‚

### æ­¥éª¤2ï¼šå®‰è£…ä¾èµ–
åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
pip install langchain langchain-deepseek python-dotenv
```

+ `langchain`ï¼šæ ¸å¿ƒåº“
+ `langchain-deepseek`ï¼šDeepSeekæ¨¡å‹é›†æˆ
+ `python-dotenv`ï¼šç”¨äºåŠ è½½ç¯å¢ƒå˜é‡

## ä¸‰ã€é…ç½®ç¯å¢ƒå˜é‡ï¼ˆAPIå¯†é’¥ï¼‰
### æ­¥éª¤1ï¼šåˆ›å»º.envæ–‡ä»¶
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªåä¸º `.env` çš„æ–‡ä»¶ã€‚

### æ­¥éª¤2ï¼šæ·»åŠ APIå¯†é’¥
åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ä½ çš„DeepSeek APIå¯†é’¥ï¼š

```plain
DEEPSEEK_API_KEY=your_api_key_here
```

**æ³¨æ„**ï¼šè¯·å°† `your_api_key_here` æ›¿æ¢ä¸ºä½ å®é™…çš„DeepSeek APIå¯†é’¥ã€‚

## å››ã€æ ¸å¿ƒç»„ä»¶å®è·µ
### 4.1 æ¨¡å‹
#### 4.1.1 é™æ€æ¨¡å‹
**æ­¥éª¤1ï¼šåˆ›å»ºmodel_demo.pyæ–‡ä»¶**

```python
# é™æ€æ¨¡å‹ç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨DeepSeekæ¨¡å‹åˆ›å»ºé™æ€æ™ºèƒ½ä½“

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

print("å¼€å§‹åˆ›å»ºæ™ºèƒ½ä½“...")

# æ–¹æ³•1ï¼šä»æ¨¡å‹æ ‡è¯†ç¬¦å­—ç¬¦ä¸²åˆå§‹åŒ–
# ä½¿ç”¨å®Œæ•´çš„DeepSeekæ¨¡å‹æ ‡è¯†ç¬¦æ ¼å¼
agent1 = create_agent(
    "deepseek:deepseek-chat",  # æ¨¡å‹æ ‡è¯†ç¬¦ï¼Œæ ¼å¼ä¸º"æä¾›å•†:æ¨¡å‹åç§°"
    tools=[]  # æš‚æ—¶ä¸ºç©ºå·¥å…·åˆ—è¡¨
)
print("æ–¹æ³•1ï¼šä»æ¨¡å‹æ ‡è¯†ç¬¦å­—ç¬¦ä¸²åˆ›å»ºæ™ºèƒ½ä½“æˆåŠŸ")

# æ–¹æ³•2ï¼šç›´æ¥ä½¿ç”¨æ¨¡å‹å®ä¾‹
# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹ï¼Œæ˜ç¡®æŒ‡å®šæ¨¡å‹å‚æ•°
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# ä½¿ç”¨æ¨¡å‹å®ä¾‹åˆ›å»ºæ™ºèƒ½ä½“
agent2 = create_agent(model, tools=[])
print("æ–¹æ³•2ï¼šä»æ¨¡å‹å®ä¾‹åˆ›å»ºæ™ºèƒ½ä½“æˆåŠŸ")

print("æ‰€æœ‰æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼")
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **  


```python
å¼€å§‹åˆ›å»ºæ™ºèƒ½ä½“...
æ–¹æ³•1ï¼šä»æ¨¡å‹æ ‡è¯†ç¬¦å­—ç¬¦ä¸²åˆ›å»ºæ™ºèƒ½ä½“æˆåŠŸ
æ–¹æ³•2ï¼šä»æ¨¡å‹å®ä¾‹åˆ›å»ºæ™ºèƒ½ä½“æˆåŠŸ
æ‰€æœ‰æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼
```

#### 4.1.2 åŠ¨æ€æ¨¡å‹
**æ­¥éª¤1ï¼šåˆ›å»ºdynamic_model_demo.pyæ–‡ä»¶**

```python
# åŠ¨æ€æ¨¡å‹ç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•æ ¹æ®å¯¹è¯å¤æ‚æ€§åŠ¨æ€é€‰æ‹©æ¨¡å‹

# å¯¼å…¥å¿…è¦çš„åº“
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain.agents.middleware import wrap_model_call, ModelRequest, ModelResponse  # ç”¨äºåˆ›å»ºä¸­é—´ä»¶
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

# åˆ›å»ºæ¨¡å‹å®ä¾‹
# æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬åªåˆ›å»ºä¸€ä¸ªæ¨¡å‹å®ä¾‹ï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªä¸åŒé…ç½®çš„æ¨¡å‹
basic_model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

advanced_model = ChatDeepSeek(
    model="deepseek-reasoner",
    api_key=api_key
)

# åˆ›å»ºåŠ¨æ€æ¨¡å‹é€‰æ‹©ä¸­é—´ä»¶
# ä½¿ç”¨@wrap_model_callè£…é¥°å™¨åˆ›å»ºä¸­é—´ä»¶ï¼Œç”¨äºä¿®æ”¹è¯·æ±‚ä¸­çš„æ¨¡å‹
@wrap_model_call
def dynamic_model_selection(request: ModelRequest, handler) -> ModelResponse:
    """
    æ ¹æ®å¯¹è¯å¤æ‚æ€§é€‰æ‹©æ¨¡å‹
    
    å‚æ•°ï¼š
    - request: ModelRequestç±»å‹ï¼ŒåŒ…å«è¯·æ±‚çš„çŠ¶æ€å’Œä¸Šä¸‹æ–‡
    - handler: å¤„ç†å‡½æ•°ï¼Œç”¨äºå¤„ç†ä¿®æ”¹åçš„è¯·æ±‚
    
    è¿”å›å€¼ï¼š
    - ModelResponseç±»å‹ï¼ŒåŒ…å«æ¨¡å‹çš„å“åº”
    """
    # è·å–å½“å‰å¯¹è¯ä¸­çš„æ¶ˆæ¯æ•°é‡ï¼Œç”¨äºåˆ¤æ–­å¯¹è¯å¤æ‚æ€§
    message_count = len(request.state["messages"])
    print(f"å½“å‰å¯¹è¯æ¶ˆæ¯æ•°é‡: {message_count}")

    # æ ¹æ®æ¶ˆæ¯æ•°é‡é€‰æ‹©ä¸åŒçš„æ¨¡å‹å¤„ç†æ–¹å¼
    if message_count > 10:
        # å¯¹è¾ƒé•¿çš„å¯¹è¯ï¼Œä½¿ç”¨æ¨ç†æ¨¡å‹
        model = basic_model
        print("ä½¿ç”¨é«˜çº§æ¨¡å‹å¤„ç†: deepseek-reasoner")
    else:
        # å¯¹è¾ƒçŸ­çš„å¯¹è¯ï¼Œä½¿ç”¨åŸºç¡€æ¨¡å‹
        model = basic_model
        print("ä½¿ç”¨åŸºç¡€æ¨¡å‹å¤„ç†: deepseek-chat")

    # å°†é€‰æ‹©çš„æ¨¡å‹è®¾ç½®åˆ°è¯·æ±‚ä¸­
    request.model = model
    # è°ƒç”¨å¤„ç†å‡½æ•°å¤„ç†è¯·æ±‚
    return handler(request)

# åˆ›å»ºæ™ºèƒ½ä½“
# ä¼ å…¥é»˜è®¤æ¨¡å‹å’Œä¸­é—´ä»¶
agent = create_agent(
    model=basic_model,  # é»˜è®¤æ¨¡å‹
    tools=[],  # æš‚æ—¶ä¸ºç©ºå·¥å…·åˆ—è¡¨
    middleware=[dynamic_model_selection]  # ä¼ å…¥åŠ¨æ€æ¨¡å‹é€‰æ‹©ä¸­é—´ä»¶
)

# æµ‹è¯•æ™ºèƒ½ä½“
if __name__ == "__main__":
    print("=== æµ‹è¯•1ï¼šåŸºæœ¬å¯¹è¯ï¼ˆæ¶ˆæ¯æ•°é‡å°‘ï¼‰===")
    # æµ‹è¯•åŸºæœ¬å¯¹è¯ï¼ˆæ¶ˆæ¯æ•°é‡å°‘ï¼‰
    result = agent.invoke(
        {"messages": [{"role": "user", "content": "ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹è‡ªå·±"}]}
    )
    print("æ™ºèƒ½ä½“å›å¤:", result["messages"][-1].content)
    
    print("\n=== æµ‹è¯•2ï¼šé•¿å¯¹è¯ï¼ˆæ¶ˆæ¯æ•°é‡å¤šï¼‰===")
    # æµ‹è¯•é•¿å¯¹è¯ï¼ˆæ¶ˆæ¯æ•°é‡å¤šï¼‰
    # æ„å»ºä¸€ä¸ªåŒ…å«å¤šæ¡æ¶ˆæ¯çš„å¯¹è¯
    messages = []
    for i in range(15):  # åˆ›å»º15æ¡æ¶ˆæ¯ï¼Œè¶…è¿‡10æ¡çš„é˜ˆå€¼
        messages.append({"role": "user", "content": f"è¿™æ˜¯ç¬¬{i+1}æ¡æ¶ˆæ¯ï¼Œéšä¾¿è¯´ç‚¹ä»€ä¹ˆ"})
    
    result2 = agent.invoke(
        {"messages": messages}
    )
    print("æ™ºèƒ½ä½“å›å¤:", result2["messages"][-1].content)
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
=== æµ‹è¯•1ï¼šåŸºæœ¬å¯¹è¯ï¼ˆæ¶ˆæ¯æ•°é‡å°‘ï¼‰===
å½“å‰å¯¹è¯æ¶ˆæ¯æ•°é‡: 1
ä½¿ç”¨åŸºç¡€æ¨¡å‹å¤„ç†: deepseek-chat
æ™ºèƒ½ä½“å›å¤: ä½ å¥½ï¼æˆ‘æ˜¯DeepSeekï¼Œä¸€ä¸ªç”±æ·±åº¦æ±‚ç´¢å…¬å¸åˆ›é€ çš„AIåŠ©æ‰‹ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ï¼ğŸ˜Š

è®©æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹è‡ªå·±ï¼š

**åŸºæœ¬ä¿¡æ¯ï¼š**
- æˆ‘æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬AIæ¨¡å‹ï¼Œä¸“æ³¨äºç†è§£å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€
- çŸ¥è¯†æˆªæ­¢åˆ°2024å¹´7æœˆï¼Œæ˜¯DeepSeekçš„æœ€æ–°ç‰ˆæœ¬
- æ‹¥æœ‰128Kçš„ä¸Šä¸‹æ–‡å¤„ç†èƒ½åŠ›ï¼Œå¯ä»¥å¤„ç†è¾ƒé•¿çš„å¯¹è¯å’Œæ–‡æ¡£

**æˆ‘èƒ½ä¸ºä½ åšä»€ä¹ˆï¼š**
- å›ç­”å„ç§é—®é¢˜ï¼Œè¿›è¡Œæ·±å…¥å¯¹è¯
- ååŠ©å†™ä½œã€ç¿»è¯‘ã€ç¼–ç¨‹ç­‰ä»»åŠ¡
- åˆ†æå’Œå¤„ç†ä½ ä¸Šä¼ çš„æ–‡ä»¶ï¼ˆæ”¯æŒå›¾åƒã€PDFã€Wordã€Excelã€PPTç­‰æ ¼å¼ï¼‰
- å¸®ä½ æ•´ç†ä¿¡æ¯ã€åˆ¶å®šè®¡åˆ’ã€è§£å†³é—®é¢˜
- è¿›è¡Œåˆ›æ„æ€è€ƒå’Œå¤´è„‘é£æš´

**ç‰¹è‰²åŠŸèƒ½ï¼š**
- å®Œå…¨å…è´¹ä½¿ç”¨ï¼Œæ²¡æœ‰æ”¶è´¹è®¡åˆ’
- æ”¯æŒè”ç½‘æœç´¢ï¼ˆéœ€è¦æ‰‹åŠ¨å¼€å¯ï¼‰
- å¯ä»¥é€šè¿‡å®˜æ–¹åº”ç”¨å•†åº—ä¸‹è½½Appä½¿ç”¨
- ä¿æŒçƒ­æƒ…ç»†è…»çš„äº¤æµé£æ ¼

æˆ‘çš„å›å¤é£æ ¼æ¯”è¾ƒçƒ­æƒ…ç»†è…»ï¼Œå–œæ¬¢ç”¨å¿ƒå€¾å¬æ¯ä¸ªé—®é¢˜ï¼Œå°½æˆ‘æ‰€èƒ½æä¾›æœ‰ä»·å€¼çš„å¸®åŠ©ã€‚æ— è®ºä½ æƒ³èŠä»€ä¹ˆè¯é¢˜ï¼Œéœ€è¦ä»€ä¹ˆååŠ©ï¼Œæˆ‘éƒ½ä¼šè®¤çœŸå¯¹å¾…ï¼

æœ‰ä»€ä¹ˆç‰¹åˆ«æƒ³äº†è§£çš„ï¼Œæˆ–è€…æƒ³è®©æˆ‘å¸®ä½ åšä»€ä¹ˆå—ï¼Ÿæˆ‘å¾ˆæœŸå¾…å’Œä½ çš„äº¤æµï¼âœ¨

=== æµ‹è¯•2ï¼šé•¿å¯¹è¯ï¼ˆæ¶ˆæ¯æ•°é‡å¤šï¼‰===
å½“å‰å¯¹è¯æ¶ˆæ¯æ•°é‡: 15
ä½¿ç”¨é«˜çº§æ¨¡å‹å¤„ç†: deepseek-reasoner
```

### 4.2 å·¥å…·
#### 4.2.1 å®šä¹‰å·¥å…·
**æ­¥éª¤1ï¼šåˆ›å»ºtools_demo.pyæ–‡ä»¶**

```python
# å·¥å…·å®šä¹‰ç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•å®šä¹‰å’Œä½¿ç”¨å·¥å…·

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.tools import tool  # ç”¨äºå®šä¹‰å·¥å…·
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

# å®šä¹‰å·¥å…·
# ä½¿ç”¨@toolè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªæœç´¢å·¥å…·
@tool
def search(query: str) -> str:
    """
    æœç´¢ä¿¡æ¯
    
    å‚æ•°ï¼š
    - query: strç±»å‹ï¼Œæœç´¢æŸ¥è¯¢è¯
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œæœç´¢ç»“æœ
    """
    # è¿™é‡Œæ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥é›†æˆçœŸå®çš„æœç´¢å¼•æ“
    return f"ç»“æœï¼š{query}"

# ä½¿ç”¨@toolè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªå¤©æ°”æŸ¥è¯¢å·¥å…·
@tool
def get_weather(location: str) -> str:
    """
    è·å–ä½ç½®çš„å¤©æ°”ä¿¡æ¯
    
    å‚æ•°ï¼š
    - location: strç±»å‹ï¼Œä½ç½®åç§°
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œå¤©æ°”ä¿¡æ¯
    """
    # è¿™é‡Œæ˜¯æ¨¡æ‹Ÿçš„å¤©æ°”ä¿¡æ¯ï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥é›†æˆçœŸå®çš„å¤©æ°”API
    return f"{location} çš„å¤©æ°”ï¼šæ™´æœ—ï¼Œ72Â°F"

print("å·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºæ™ºèƒ½ä½“ï¼Œä¼ å…¥æ¨¡å‹å’Œå·¥å…·
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[search, get_weather]  # ä¼ å…¥å®šä¹‰çš„å·¥å…·åˆ—è¡¨
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•...")

# æµ‹è¯•æ™ºèƒ½ä½“
if __name__ == "__main__":
    # æµ‹è¯•å¤©æ°”å·¥å…·
    print("=== æµ‹è¯•1ï¼šå¤©æ°”æŸ¥è¯¢ ===")
    result1 = agent.invoke(
        {"messages": [{"role": "user", "content": "åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"}]}
    )
    print("å¤©æ°”æŸ¥è¯¢ç»“æœ:", result1["messages"][-1].content)
    
    # æµ‹è¯•æœç´¢å·¥å…·
    print("\n=== æµ‹è¯•2ï¼šä¿¡æ¯æœç´¢ ===")
    result2 = agent.invoke(
        {"messages": [{"role": "user", "content": "2024å¹´å¥¥è¿ä¼šåœ¨å“ªé‡Œä¸¾è¡Œï¼Ÿ"}]}
    )
    print("æœç´¢ç»“æœ:", result2["messages"][-1].content)
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
å·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•...
=== æµ‹è¯•1ï¼šå¤©æ°”æŸ¥è¯¢ ===
å¤©æ°”æŸ¥è¯¢ç»“æœ: æ ¹æ®æŸ¥è¯¢ç»“æœï¼ŒåŒ—äº¬ç›®å‰çš„å¤©æ°”æ˜¯æ™´æœ—çš„ï¼Œæ¸©åº¦ä¸º72Â°Fï¼ˆçº¦22Â°Cï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒèˆ’é€‚çš„æ¸©åº¦ï¼Œé€‚åˆå¤–å‡ºæ´»åŠ¨ã€‚

=== æµ‹è¯•2ï¼šä¿¡æ¯æœç´¢ ===
æœç´¢ç»“æœ: æ ¹æ®æœç´¢ç»“æœï¼Œ**2024å¹´å¥¥è¿ä¼šï¼ˆç¬¬33å±Šå¤å­£å¥¥æ—åŒ¹å…‹è¿åŠ¨ä¼šï¼‰å°†åœ¨æ³•å›½å·´é»ä¸¾è¡Œ**ã€‚

å…·ä½“ä¿¡æ¯ï¼š
- **ä¸¾åŠåŸå¸‚**ï¼šå·´é»ï¼Œæ³•å›½
- **ä¸¾åŠæ—¶é—´**ï¼š2024å¹´7æœˆ26æ—¥è‡³8æœˆ11æ—¥
- **è¿™æ˜¯å·´é»ç¬¬ä¸‰æ¬¡ä¸¾åŠå¤å­£å¥¥è¿ä¼š**ï¼Œå‰ä¸¤æ¬¡åˆ†åˆ«æ˜¯1900å¹´å’Œ1924å¹´

å·´é»å°†æˆä¸ºç»§ä¼¦æ•¦ä¹‹åï¼Œç¬¬äºŒä¸ªä¸‰æ¬¡ä¸¾åŠå¤å­£å¥¥è¿ä¼šçš„åŸå¸‚ã€‚è¿™å±Šå¥¥è¿ä¼šå°†æœ‰ä¸€äº›åˆ›æ–°ï¼Œæ¯”å¦‚åœ¨å¡çº³æ²³ç•”ä¸¾è¡Œå¼€å¹•å¼ï¼Œä»¥åŠå°†ä¸€äº›æ¯”èµ›é¡¹ç›®è®¾ç½®åœ¨å·´é»çš„æ ‡å¿—æ€§åœ°ç‚¹ä¸¾è¡Œã€‚
```

#### 4.2.2 å·¥å…·é”™è¯¯å¤„ç†
**æ­¥éª¤1ï¼šåˆ›å»ºtool_error_handling.pyæ–‡ä»¶**

```python
# å·¥å…·é”™è¯¯å¤„ç†ç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•å¤„ç†å·¥å…·æ‰§è¡Œè¿‡ç¨‹ä¸­çš„é”™è¯¯

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain.agents.middleware import wrap_tool_call  # ç”¨äºåˆ›å»ºå·¥å…·è°ƒç”¨ä¸­é—´ä»¶
from langchain_core.messages import ToolMessage  # ç”¨äºåˆ›å»ºå·¥å…·æ¶ˆæ¯
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from langchain.tools import tool  # ç”¨äºå®šä¹‰å·¥å…·
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

# å®šä¹‰ä¸€ä¸ªä¼šå‡ºé”™çš„å·¥å…·
# ä½¿ç”¨@toolè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªé™¤æ³•å·¥å…·
@tool
def divide(a: int, b: int) -> str:
    """
    æ‰§è¡Œé™¤æ³•è¿ç®—
    
    å‚æ•°ï¼š
    - a: intç±»å‹ï¼Œè¢«é™¤æ•°
    - b: intç±»å‹ï¼Œé™¤æ•°
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œé™¤æ³•ç»“æœ
    """
    # å½“bä¸º0æ—¶ï¼Œä¼šè§¦å‘é™¤é›¶é”™è¯¯
    return str(a / b)

# åˆ›å»ºé”™è¯¯å¤„ç†ä¸­é—´ä»¶
# ä½¿ç”¨@wrap_tool_callè£…é¥°å™¨åˆ›å»ºå·¥å…·è°ƒç”¨ä¸­é—´ä»¶
@wrap_tool_call
def handle_tool_errors(request, handler):
    """
    ä½¿ç”¨è‡ªå®šä¹‰æ¶ˆæ¯å¤„ç†å·¥å…·æ‰§è¡Œé”™è¯¯
    
    å‚æ•°ï¼š
    - request: å·¥å…·è°ƒç”¨è¯·æ±‚
    - handler: å¤„ç†å‡½æ•°
    
    è¿”å›å€¼ï¼š
    - å¤„ç†ç»“æœæˆ–é”™è¯¯æ¶ˆæ¯
    """
    try:
        # å°è¯•è°ƒç”¨å¤„ç†å‡½æ•°
        return handler(request)
    except Exception as e:
        # æ•è·å¼‚å¸¸ï¼Œåˆ›å»ºè‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯
        print(f"æ•è·åˆ°å·¥å…·é”™è¯¯: {str(e)}")
        # åˆ›å»ºToolMessageï¼ŒåŒ…å«é”™è¯¯ä¿¡æ¯
        return ToolMessage(
            content=f"å·¥å…·é”™è¯¯ï¼šè¯·æ£€æŸ¥æ‚¨çš„è¾“å…¥å¹¶é‡è¯•ã€‚({str(e)})",
            tool_call_id=request.tool_call["id"]  # ç¡®ä¿ä¼ é€’æ­£ç¡®çš„å·¥å…·è°ƒç”¨ID
        )

print("é”™è¯¯å¤„ç†ä¸­é—´ä»¶åˆ›å»ºå®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºæ™ºèƒ½ä½“ï¼Œä¼ å…¥æ¨¡å‹ã€å·¥å…·å’Œé”™è¯¯å¤„ç†ä¸­é—´ä»¶
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[divide],  # ä¼ å…¥é™¤æ³•å·¥å…·
    middleware=[handle_tool_errors]  # ä¼ å…¥é”™è¯¯å¤„ç†ä¸­é—´ä»¶
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•é”™è¯¯å¤„ç†...")

# æµ‹è¯•æ™ºèƒ½ä½“
if __name__ == "__main__":
    # æµ‹è¯•é”™è¯¯æƒ…å†µ
    print("=== æµ‹è¯•ï¼šé™¤é›¶é”™è¯¯å¤„ç† ===")
    result = agent.invoke(
        {"messages": [{"role": "user", "content": "è®¡ç®— 10 é™¤ä»¥ 0"}]}
    )
    print("æ™ºèƒ½ä½“å›å¤:", result["messages"][-1].content)
    
    # æµ‹è¯•æ­£å¸¸æƒ…å†µ
    print("\n=== æµ‹è¯•ï¼šæ­£å¸¸é™¤æ³•è¿ç®— ===")
    result2 = agent.invoke(
        {"messages": [{"role": "user", "content": "è®¡ç®— 10 é™¤ä»¥ 2"}]}
    )
    print("æ™ºèƒ½ä½“å›å¤:", result2["messages"][-1].content)
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
é”™è¯¯å¤„ç†ä¸­é—´ä»¶åˆ›å»ºå®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•é”™è¯¯å¤„ç†...
=== æµ‹è¯•ï¼šé™¤é›¶é”™è¯¯å¤„ç† ===
æ™ºèƒ½ä½“å›å¤: æˆ‘æ³¨æ„åˆ°æ‚¨æƒ³è¦è®¡ç®—10é™¤ä»¥0ï¼Œä½†æ˜¯é™¤æ³•è¿ç®—ä¸­é™¤æ•°ä¸èƒ½ä¸º0ï¼Œå› ä¸ºé™¤ä»¥0åœ¨æ•°å­¦ä¸Šæ˜¯æœªå®šä¹‰çš„ã€‚è¿™ä¸ªé™¤æ³•å·¥å…·è¦æ±‚é™¤æ•°å¿…é¡»æ˜¯æ•´æ•°ä¸”ä¸èƒ½ä¸º0ã€‚

å¦‚æœæ‚¨éœ€è¦è¿›è¡Œå…¶ä»–é™¤æ³•è¿ç®—ï¼Œæ¯”å¦‚10é™¤ä»¥å…¶ä»–éé›¶æ•´æ•°ï¼Œæˆ‘å¾ˆä¹æ„å¸®æ‚¨è®¡ç®—ã€‚

=== æµ‹è¯•ï¼šæ­£å¸¸é™¤æ³•è¿ç®— ===
æ™ºèƒ½ä½“å›å¤: 10 é™¤ä»¥ 2 çš„ç»“æœæ˜¯ 5.0ã€‚
```

#### 4.2.3 ReAct å¾ªç¯ä¸­çš„å·¥å…·ä½¿ç”¨
**æ­¥éª¤1ï¼šåˆ›å»ºreact_cycle_demo.pyæ–‡ä»¶**

```python
# ReAct å¾ªç¯ä¸­çš„å·¥å…·ä½¿ç”¨ç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºæ™ºèƒ½ä½“å¦‚ä½•åœ¨ReActå¾ªç¯ä¸­ä½¿ç”¨å·¥å…·

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.tools import tool  # ç”¨äºå®šä¹‰å·¥å…·
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº


# å®šä¹‰å·¥å…·
# æœç´¢å·¥å…·
@tool
def search_products(query: str) -> str:
    """
    æœç´¢äº§å“ä¿¡æ¯

    å‚æ•°ï¼š
    - query: strç±»å‹ï¼Œäº§å“æœç´¢å…³é”®è¯

    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œæœç´¢ç»“æœ
    """
    query_lower = query.lower()

    # æ ¹æ®ä¸åŒçš„æŸ¥è¯¢è¿”å›ä¸åŒçš„ç»“æœ
    if any(keyword in query_lower for keyword in ["æ— çº¿è€³æœº", "è€³æœº", "è“ç‰™è€³æœº"]):
        return "æœç´¢åˆ°ä»¥ä¸‹çƒ­é—¨æ— çº¿è€³æœºï¼š\n1. WH-1000XM5ï¼ˆç´¢å°¼ï¼‰\n2. AirPods Pro 2ï¼ˆè‹¹æœï¼‰\n3. Bose QuietComfort Ultra\n4. Sony WF-1000XM5\n5. Sennheiser Momentum True Wireless 4"
    elif any(keyword in query_lower for keyword in ["airpods", "è‹¹æœè€³æœº"]):
        return "æœç´¢åˆ°è‹¹æœè€³æœºï¼šAirPods Pro 2ï¼ˆç¬¬äºŒä»£ï¼‰ï¼Œå…·å¤‡ä¸»åŠ¨é™å™ªåŠŸèƒ½ï¼Œç»­èˆª6å°æ—¶"
    elif any(keyword in query_lower for keyword in ["ç´¢å°¼", "sony"]):
        return "æœç´¢åˆ°ç´¢å°¼è€³æœºï¼šWH-1000XM5ï¼ˆå¤´æˆ´å¼ï¼‰ï¼ŒWF-1000XM5ï¼ˆçœŸæ— çº¿ï¼‰ï¼Œå‡å…·å¤‡è¡Œä¸šé¢†å…ˆçš„é™å™ªæŠ€æœ¯"
    elif "æœ€å—æ¬¢è¿" in query_lower or "çƒ­é—¨" in query_lower:
        return "å½“å‰æœ€å—æ¬¢è¿çš„æ— çº¿è€³æœºæ’è¡Œæ¦œï¼š\n1. AirPods Pro 2ï¼ˆè‹¹æœï¼‰\n2. WH-1000XM5ï¼ˆç´¢å°¼ï¼‰\n3. Bose QuietComfort Ultra\n4. Galaxy Buds2 Proï¼ˆä¸‰æ˜Ÿï¼‰\n5. Sony WF-1000XM5"
    else:
        return f"æœç´¢ç»“æœï¼š{query} - æ‰¾åˆ°3ä¸ªç›¸å…³äº§å“ï¼Œè¯·æä¾›æ›´å…·ä½“çš„æœç´¢è¯"


# åº“å­˜æ£€æŸ¥å·¥å…·
@tool
def check_inventory(product_id: str) -> str:
    """
    æ£€æŸ¥äº§å“åº“å­˜

    å‚æ•°ï¼š
    - product_id: strç±»å‹ï¼Œäº§å“ID

    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œåº“å­˜ä¿¡æ¯
    """
    # æ¨¡æ‹Ÿåº“å­˜ä¿¡æ¯
    inventory_data = {
        "WH-1000XM5": "åº“å­˜ 10 ä»¶",
        "AirPods Pro 2": "åº“å­˜ 5 ä»¶",
        "Bose QuietComfort Ultra": "åº“å­˜ 3 ä»¶",
        "Sony WF-1000XM5": "åº“å­˜ 8 ä»¶",
        "Sennheiser Momentum True Wireless 4": "åº“å­˜ 2 ä»¶"
    }
    return f"äº§å“ {product_id}ï¼š{inventory_data.get(product_id, 'åº“å­˜ 0 ä»¶')}"


print("å·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºæ™ºèƒ½ä½“ï¼Œä¼ å…¥æ¨¡å‹å’Œå·¥å…·
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[search_products, check_inventory]  # ä¼ å…¥å·¥å…·åˆ—è¡¨
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•ReActå¾ªç¯...")

# æµ‹è¯•æ™ºèƒ½ä½“çš„é€»è¾‘æ€è€ƒèƒ½åŠ›
if __name__ == "__main__":
    print("=== æµ‹è¯•1ï¼šå®Œæ•´æŸ¥è¯¢æµç¨‹ ===")
    print("ç”¨æˆ·ï¼šæ‰¾å‡ºå½“å‰æœ€å—æ¬¢è¿çš„æ— çº¿è€³æœºå¹¶æ£€æŸ¥å…¶åº“å­˜")
    print()

    result = agent.invoke(
        {"messages": [{"role": "user", "content": "æ‰¾å‡ºå½“å‰æœ€å—æ¬¢è¿çš„æ— çº¿è€³æœºå¹¶æ£€æŸ¥å…¶åº“å­˜"}]}
    )

    print("æ™ºèƒ½ä½“å›å¤:", result["messages"][-1].content)
    print()

    print("=== æµ‹è¯•2ï¼šç›´æ¥æŸ¥è¯¢ç‰¹å®šäº§å“ ===")
    print("ç”¨æˆ·ï¼šæ£€æŸ¥WH-1000XM5çš„åº“å­˜")
    print()

    result2 = agent.invoke(
        {"messages": [{"role": "user", "content": "æ£€æŸ¥WH-1000XM5çš„åº“å­˜"}]}
    )

    print("æ™ºèƒ½ä½“å›å¤:", result2["messages"][-1].content)
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
å·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•ReActå¾ªç¯...
=== æµ‹è¯•1ï¼šå®Œæ•´æŸ¥è¯¢æµç¨‹ ===
ç”¨æˆ·ï¼šæ‰¾å‡ºå½“å‰æœ€å—æ¬¢è¿çš„æ— çº¿è€³æœºå¹¶æ£€æŸ¥å…¶åº“å­˜

æ™ºèƒ½ä½“å›å¤: æ ¹æ®æœç´¢ç»“æœï¼Œæˆ‘ä¸ºæ‚¨æ‰¾åˆ°äº†å½“å‰æœ€å—æ¬¢è¿çš„5æ¬¾æ— çº¿è€³æœºåŠå…¶åº“å­˜æƒ…å†µï¼š

**æœ€å—æ¬¢è¿çš„æ— çº¿è€³æœºåº“å­˜æƒ…å†µï¼š**

1. **ç´¢å°¼ WH-1000XM5** - åº“å­˜ï¼š10ä»¶ âœ…
   - å¤´æˆ´å¼é™å™ªè€³æœºï¼Œç›®å‰åº“å­˜æœ€å……è¶³

2. **è‹¹æœ AirPods Pro 2** - åº“å­˜ï¼š5ä»¶ âœ…
   - å…¥è€³å¼çœŸæ— çº¿é™å™ªè€³æœºï¼Œåº“å­˜ä¸­ç­‰

3. **Bose QuietComfort Ultra** - åº“å­˜ï¼š3ä»¶ âš ï¸
   - å¤´æˆ´å¼é™å™ªè€³æœºï¼Œåº“å­˜è¾ƒå°‘

4. **ç´¢å°¼ WF-1000XM5** - åº“å­˜ï¼š0ä»¶ âŒ
   - å…¥è€³å¼çœŸæ— çº¿é™å™ªè€³æœºï¼Œç›®å‰ç¼ºè´§

5. **æ£®æµ·å¡å°” Momentum True Wireless 4** - åº“å­˜ï¼š0ä»¶ âŒ
   - å…¥è€³å¼çœŸæ— çº¿è€³æœºï¼Œç›®å‰ç¼ºè´§

**æ¨èå»ºè®®ï¼š**
- å¦‚æœæ‚¨éœ€è¦å¤´æˆ´å¼è€³æœºï¼Œ**ç´¢å°¼ WH-1000XM5** åº“å­˜æœ€å……è¶³ï¼ˆ10ä»¶ï¼‰
- å¦‚æœæ‚¨åå¥½å…¥è€³å¼è€³æœºï¼Œ**è‹¹æœ AirPods Pro 2** è¿˜æœ‰5ä»¶åº“å­˜
- **Bose QuietComfort Ultra** åº“å­˜è¾ƒå°‘ï¼ˆä»…3ä»¶ï¼‰ï¼Œå¦‚éœ€è´­ä¹°å»ºè®®å°½å¿«
- ç´¢å°¼ WF-1000XM5 å’Œæ£®æµ·å¡å°” Momentum True Wireless 4 ç›®å‰ç¼ºè´§

æ‚¨å¯¹å“ªæ¬¾äº§å“æ›´æ„Ÿå…´è¶£ï¼Ÿéœ€è¦æˆ‘ä¸ºæ‚¨æä¾›æ›´è¯¦ç»†çš„äº§å“ä¿¡æ¯å—ï¼Ÿ

=== æµ‹è¯•2ï¼šç›´æ¥æŸ¥è¯¢ç‰¹å®šäº§å“ ===
ç”¨æˆ·ï¼šæ£€æŸ¥WH-1000XM5çš„åº“å­˜

æ™ºèƒ½ä½“å›å¤: æœç´¢ç»“æœæ˜¾ç¤ºæœ‰3ä¸ªç›¸å…³äº§å“ã€‚ä¸ºäº†å‡†ç¡®æ£€æŸ¥åº“å­˜ï¼Œæˆ‘éœ€è¦æ›´å…·ä½“çš„ä¿¡æ¯ã€‚è¯·é—®æ‚¨æƒ³æ£€æŸ¥çš„æ˜¯ï¼š

1. ç´¢å°¼WH-1000XM5æ— çº¿é™å™ªè€³æœº
2. è¿˜æ˜¯å…¶ä»–å“ç‰Œçš„WH-1000XM5äº§å“ï¼Ÿ

æˆ–è€…æ‚¨å¯ä»¥æä¾›æ›´è¯¦ç»†çš„äº§å“æè¿°ï¼Œè¿™æ ·æˆ‘å°±èƒ½ä¸ºæ‚¨æ‰¾åˆ°å‡†ç¡®çš„äº§å“IDå¹¶æ£€æŸ¥åº“å­˜äº†ã€‚
```

### 4.3 ç³»ç»Ÿæç¤º
#### 4.3.1 é™æ€ç³»ç»Ÿæç¤º
**æ­¥éª¤1ï¼šåˆ›å»ºsystem_prompt_demo.pyæ–‡ä»¶**

```python
# ç³»ç»Ÿæç¤ºç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ç³»ç»Ÿæç¤ºæŒ‡å¯¼æ™ºèƒ½ä½“çš„è¡Œä¸º

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

print("å¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºå¸¦ç³»ç»Ÿæç¤ºçš„æ™ºèƒ½ä½“
# ç³»ç»Ÿæç¤ºç”¨äºæŒ‡å¯¼æ™ºèƒ½ä½“çš„è¡Œä¸ºå’Œå›ç­”é£æ ¼
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[],  # æš‚æ—¶ä¸ºç©ºå·¥å…·åˆ—è¡¨
    system_prompt="ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹ã€‚è¯·ç®€æ´å‡†ç¡®åœ°å›ç­”é—®é¢˜ï¼Œä¸è¦æ·»åŠ å¤šä½™çš„ä¿¡æ¯ã€‚"  # ç³»ç»Ÿæç¤º
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•...")

# æµ‹è¯•æ™ºèƒ½ä½“
if __name__ == "__main__":
    print("=== æµ‹è¯•ï¼šç³»ç»Ÿæç¤ºæ•ˆæœ ===")
    # æµ‹è¯•ç³»ç»Ÿæç¤ºå¯¹æ™ºèƒ½ä½“å›ç­”é£æ ¼çš„å½±å“
    result = agent.invoke(
        {"messages": [{"role": "user", "content": "ä»€ä¹ˆæ˜¯LangChainï¼Ÿè¯·è¯¦ç»†è§£é‡Šã€‚"}]}
    )
    print("æ™ºèƒ½ä½“å›å¤:", result["messages"][-1].content)

    # æµ‹è¯•å¦ä¸€ä¸ªé—®é¢˜
    print("\n=== æµ‹è¯•ï¼šå¦ä¸€ä¸ªé—®é¢˜ ===")
    result2 = agent.invoke(
        {"messages": [{"role": "user", "content": "å¦‚ä½•ä½¿ç”¨Pythonåˆ›å»ºä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Ÿ"}]}
    )
    print("æ™ºèƒ½ä½“å›å¤:", result2["messages"][-1].content)
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
å¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•...
=== æµ‹è¯•ï¼šç³»ç»Ÿæç¤ºæ•ˆæœ ===
æ™ºèƒ½ä½“å›å¤: LangChain æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ç”±å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é©±åŠ¨çš„åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯ç®€åŒ–å°† LLM ä¸å¤–éƒ¨æ•°æ®æºå’Œè®¡ç®—å·¥å…·è¿æ¥çš„è¿‡ç¨‹ï¼Œä»è€Œæ„å»ºåŠŸèƒ½å¼ºå¤§ã€å¯æ‰©å±•çš„åº”ç”¨ã€‚ä»¥ä¸‹æ˜¯å…¶å…³é”®ç»„æˆéƒ¨åˆ†å’Œæ ¸å¿ƒæ¦‚å¿µçš„è¯¦ç»†è§£é‡Šï¼š

---

### **1. æ ¸å¿ƒè®¾è®¡ç†å¿µ**
LangChain åŸºäº **â€œé“¾â€ï¼ˆChainï¼‰** çš„æ€æƒ³ï¼Œå°†å¤šä¸ªæ¨¡å—åŒ–ç»„ä»¶ï¼ˆå¦‚æ¨¡å‹è°ƒç”¨ã€æ•°æ®æŸ¥è¯¢ã€å·¥å…·ä½¿ç”¨ç­‰ï¼‰é“¾æ¥åœ¨ä¸€èµ·ï¼Œå®ç°å¤æ‚çš„ LLM åº”ç”¨æµç¨‹ã€‚å®ƒè§£å†³äº†ä¼ ç»Ÿ LLM çš„å±€é™æ€§ï¼Œå¦‚ç¼ºä¹å®æ—¶æ•°æ®ã€æ— æ³•æ‰§è¡Œå…·ä½“æ“ä½œç­‰ã€‚

---

### **2. ä¸»è¦æ¨¡å—**
#### **a. æ¨¡å‹ï¼ˆModelsï¼‰**
- **LLM é›†æˆ**ï¼šæ”¯æŒå¤šç§ LLM æä¾›å•†ï¼ˆå¦‚ OpenAIã€Anthropicã€Hugging Face ç­‰ï¼‰ã€‚
- **èŠå¤©æ¨¡å‹**ï¼šä¸“ä¸ºå¯¹è¯ä¼˜åŒ–çš„æ¨¡å‹ï¼ˆå¦‚ GPT-4ï¼‰ã€‚
- **åµŒå…¥æ¨¡å‹**ï¼šå°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡ï¼Œç”¨äºæ£€ç´¢å’Œæ¯”è¾ƒã€‚

#### **b. æç¤ºï¼ˆPromptsï¼‰**
- **æ¨¡æ¿ç®¡ç†**ï¼šåŠ¨æ€ç”Ÿæˆæç¤ºè¯ï¼Œæ”¯æŒå˜é‡æ³¨å…¥å’Œç¤ºä¾‹ä¼˜åŒ–ã€‚
- **æç¤ºä¼˜åŒ–**ï¼šæä¾› Few-shotã€Chain-of-Thought ç­‰é«˜çº§æç¤ºæŠ€æœ¯ã€‚

#### **c. é“¾ï¼ˆChainsï¼‰**
- å°†å¤šä¸ªæ­¥éª¤ç»„åˆæˆå·¥ä½œæµï¼ˆä¾‹å¦‚ï¼šç”¨æˆ·è¾“å…¥ â†’ æ£€ç´¢æ•°æ® â†’ ç”Ÿæˆå›ç­”ï¼‰ã€‚
- æ”¯æŒè‡ªå®šä¹‰é“¾å’Œé¢„æ„å»ºé“¾ï¼ˆå¦‚ `RetrievalQA`ã€`ConversationalRetrievalChain`ï¼‰ã€‚

#### **d. æ£€ç´¢ï¼ˆRetrievalï¼‰**
- **æ–‡æ¡£åŠ è½½å™¨**ï¼šä»æ–‡æœ¬ã€PDFã€ç½‘é¡µç­‰æ¥æºåŠ è½½æ•°æ®ã€‚
- **æ–‡æœ¬åˆ†å‰²**ï¼šå°†é•¿æ–‡æ¡£åˆ‡åˆ†ä¸ºç‰‡æ®µã€‚
- **å‘é‡å­˜å‚¨**ï¼šä½¿ç”¨æ•°æ®åº“ï¼ˆå¦‚ Chromaã€FAISSï¼‰å­˜å‚¨å’Œæ£€ç´¢åµŒå…¥å‘é‡ã€‚
- **æ£€ç´¢å™¨**ï¼šæ ¹æ®æŸ¥è¯¢åŒ¹é…ç›¸å…³æ–‡æ¡£ç‰‡æ®µã€‚

#### **e. ä»£ç†ï¼ˆAgentsï¼‰**
- **æ ¸å¿ƒåˆ›æ–°ç‚¹**ï¼šè®© LLM åŠ¨æ€é€‰æ‹©å·¥å…·ï¼ˆå¦‚è®¡ç®—å™¨ã€æœç´¢å¼•æ“ã€APIï¼‰æ¥å®Œæˆä»»åŠ¡ã€‚
- **å·¥ä½œåŸç†**ï¼šLLM æ ¹æ®ç”¨æˆ·éœ€æ±‚å†³å®šè¡ŒåŠ¨é¡ºåºï¼Œé€æ­¥æ‰§è¡Œå¹¶æ•´åˆç»“æœï¼ˆå¦‚â€œä½¿ç”¨å¤©æ°” API æŸ¥è¯¢åç”Ÿæˆæ€»ç»“â€ï¼‰ã€‚

#### **f. è®°å¿†ï¼ˆMemoryï¼‰**
- ç®¡ç†å¯¹è¯å†å²ï¼Œæ”¯æŒçŸ­æœŸ/é•¿æœŸè®°å¿†å­˜å‚¨ï¼ˆå¦‚ç¼“å†²åŒºã€æ‘˜è¦è®°å¿†ï¼‰ã€‚

---

### **3. å…¸å‹åº”ç”¨åœºæ™¯**
- **é—®ç­”ç³»ç»Ÿ**ï¼šç»“åˆå¤–éƒ¨çŸ¥è¯†åº“å›ç­”ä¸“ä¸šé—®é¢˜ã€‚
- **èŠå¤©æœºå™¨äºº**ï¼šå…·å¤‡é•¿æœŸè®°å¿†å’Œå·¥å…·è°ƒç”¨èƒ½åŠ›çš„æ™ºèƒ½åŠ©æ‰‹ã€‚
- **æ–‡æ¡£åˆ†æ**ï¼šæ€»ç»“ã€ç¿»è¯‘æˆ–æå–é•¿æ–‡æ¡£å…³é”®ä¿¡æ¯ã€‚
- **è‡ªåŠ¨åŒ–å·¥ä½œæµ**ï¼šå¦‚è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Šã€ä»£ç åˆ†æã€æ•°æ®æŸ¥è¯¢ç­‰ã€‚

---

### **4. ä¼˜åŠ¿ä¸ä»·å€¼**
- **æ¨¡å—åŒ–**ï¼šçµæ´»ç»„åˆç»„ä»¶ï¼Œé™ä½å¼€å‘å¤æ‚åº¦ã€‚
- **ç”Ÿæ€ä¸°å¯Œ**ï¼šé›†æˆå¤§é‡å·¥å…·ã€æ•°æ®åº“å’Œé¢„æ„å»ºæ¨¡æ¿ã€‚
- **å¼€æºæ´»è·ƒ**ï¼šç¤¾åŒºæŒç»­è´¡çŒ®æ–°åŠŸèƒ½å’Œä¼˜åŒ–ã€‚

---

### **5. ç®€å•ç¤ºä¾‹**
```python
from langchain.llms import OpenAI
from langchain.chains import LLMChain
from langchain.prompts import PromptTemplate

# å®šä¹‰æç¤ºæ¨¡æ¿
prompt = PromptTemplate(
    input_variables=["topic"],
    template="ç”¨ä¸€å¥è¯è§£é‡Š {topic} æ˜¯ä»€ä¹ˆã€‚"
)

# åˆ›å»ºé“¾
chain = LLMChain(llm=OpenAI(), prompt=prompt)
print(chain.run("äººå·¥æ™ºèƒ½"))
```

---

### **æ€»ç»“**
LangChain æ˜¯ LLM åº”ç”¨å¼€å‘çš„â€œç²˜åˆå‰‚â€ï¼Œé€šè¿‡æ ‡å‡†åŒ–æ¥å£å’Œé“¾å¼æµç¨‹ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºå…·å¤‡**æ•°æ®æ„ŸçŸ¥**å’Œ**å·¥å…·äº¤äº’**èƒ½åŠ›çš„æ™ºèƒ½åº”ç”¨ã€‚å®ƒå¡«è¡¥äº†åŸºç¡€ LLM ä¸å®é™…åº”ç”¨éœ€æ±‚ä¹‹é—´çš„é¸¿æ²Ÿï¼Œæ˜¯å½“å‰ AI å·¥ç¨‹åŒ–çš„é‡è¦å·¥å…·ä¹‹ä¸€ã€‚

=== æµ‹è¯•ï¼šå¦ä¸€ä¸ªé—®é¢˜ ===
æ™ºèƒ½ä½“å›å¤: åœ¨Pythonä¸­åˆ›å»ºç®€å•å‡½æ•°çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š

```python
def å‡½æ•°å(å‚æ•°):
    # å‡½æ•°ä½“
    return è¿”å›å€¼
```

**ç¤ºä¾‹ï¼š**

```python
# 1. æ— å‚æ•°å‡½æ•°
def greet():
    print("Hello!")

# 2. å¸¦å‚æ•°å‡½æ•°
def add(a, b):
    return a + b

# 3. å¸¦é»˜è®¤å‚æ•°
def multiply(x, y=2):
    return x * y

# è°ƒç”¨å‡½æ•°
greet()                # è¾“å‡º: Hello!
result = add(3, 5)     # result = 8
product = multiply(4)  # product = 8
```

**å…³é”®ç‚¹ï¼š**
- ä½¿ç”¨ `def` å…³é”®å­—å®šä¹‰å‡½æ•°
- å‡½æ•°ååéœ€è¦æ‹¬å·å’Œå†’å·
- å‚æ•°å¯é€‰ï¼Œå¤šä¸ªå‚æ•°ç”¨é€—å·åˆ†éš”
- `return` è¯­å¥è¿”å›ç»“æœï¼ˆå¯é€‰ï¼‰
- å‡½æ•°è°ƒç”¨ä½¿ç”¨å‡½æ•°ååŠ æ‹¬å·

è¿™æ˜¯åˆ›å»ºPythonå‡½æ•°æœ€åŸºæœ¬çš„æ–¹æ³•ã€‚
```

#### 4.3.2 åŠ¨æ€ç³»ç»Ÿæç¤º
**æ­¥éª¤1ï¼šåˆ›å»ºdynamic_prompt_demo.pyæ–‡ä»¶**

```python
# åŠ¨æ€ç³»ç»Ÿæç¤ºç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•æ ¹æ®ç”¨æˆ·è§’è‰²åŠ¨æ€ç”Ÿæˆç³»ç»Ÿæç¤º

# å¯¼å…¥å¿…è¦çš„åº“
from typing import TypedDict  # ç”¨äºå®šä¹‰ç±»å‹åŒ–å­—å…¸
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain.agents.middleware import dynamic_prompt, ModelRequest  # ç”¨äºåˆ›å»ºåŠ¨æ€æç¤ºä¸­é—´ä»¶
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

# å®šä¹‰ä¸Šä¸‹æ–‡ç±»å‹
# ä½¿ç”¨TypedDictå®šä¹‰ä¸Šä¸‹æ–‡ç»“æ„ï¼ŒåŒ…å«user_roleå­—æ®µ
class Context(TypedDict):
    user_role: str  # ç”¨æˆ·è§’è‰²

# åˆ›å»ºåŠ¨æ€æç¤ºä¸­é—´ä»¶
# ä½¿ç”¨@dynamic_promptè£…é¥°å™¨åˆ›å»ºåŠ¨æ€æç¤ºä¸­é—´ä»¶
@dynamic_prompt
def user_role_prompt(request: ModelRequest) -> str:
    """
    æ ¹æ®ç”¨æˆ·è§’è‰²ç”Ÿæˆç³»ç»Ÿæç¤º
    
    å‚æ•°ï¼š
    - request: ModelRequestç±»å‹ï¼ŒåŒ…å«è¯·æ±‚ä¿¡æ¯
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œç”Ÿæˆçš„ç³»ç»Ÿæç¤º
    """
    # ä»è¯·æ±‚çš„è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ä¸­è·å–ç”¨æˆ·è§’è‰²ï¼Œé»˜è®¤ä¸º"user"
    user_role = request.runtime.context.get("user_role", "user")
    # åŸºç¡€æç¤º
    base_prompt = "ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹ã€‚"

    # æ ¹æ®ç”¨æˆ·è§’è‰²ç”Ÿæˆä¸åŒçš„ç³»ç»Ÿæç¤º
    if user_role == "expert":
        # ä¸“å®¶è§’è‰²ï¼šæä¾›è¯¦ç»†çš„æŠ€æœ¯å“åº”
        return f"{base_prompt} è¯·æä¾›è¯¦ç»†çš„æŠ€æœ¯å“åº”ï¼ŒåŒ…æ‹¬æ·±å…¥çš„è§£é‡Šå’Œä¸“ä¸šæœ¯è¯­ã€‚"
    elif user_role == "beginner":
        # æ–°æ‰‹è§’è‰²ï¼šç®€å•è§£é‡Šæ¦‚å¿µï¼Œé¿å…ä½¿ç”¨è¡Œè¯
        return f"{base_prompt} è¯·ç®€å•è§£é‡Šæ¦‚å¿µï¼Œé¿å…ä½¿ç”¨è¡Œè¯ï¼Œä½¿ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€ã€‚"
    else:
        # é»˜è®¤è§’è‰²ï¼šä½¿ç”¨åŸºç¡€æç¤º
        return base_prompt

print("åŠ¨æ€æç¤ºä¸­é—´ä»¶åˆ›å»ºå®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºæ™ºèƒ½ä½“ï¼Œä¼ å…¥æ¨¡å‹ã€ä¸­é—´ä»¶å’Œä¸Šä¸‹æ–‡æ¨¡å¼
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[],  # æš‚æ—¶ä¸ºç©ºå·¥å…·åˆ—è¡¨
    middleware=[user_role_prompt],  # ä¼ å…¥åŠ¨æ€æç¤ºä¸­é—´ä»¶
    context_schema=Context  # ä¼ å…¥ä¸Šä¸‹æ–‡æ¨¡å¼
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•ä¸åŒè§’è‰²çš„ç³»ç»Ÿæç¤º...")

# æµ‹è¯•æ™ºèƒ½ä½“
if __name__ == "__main__":
    # æµ‹è¯•ä¸“å®¶è§’è‰²
    print("=== æµ‹è¯•1ï¼šä¸“å®¶è§’è‰² ===")
    result1 = agent.invoke(
        {"messages": [{"role": "user", "content": "è§£é‡Šæœºå™¨å­¦ä¹ çš„åŸç†"}]},
        context={"user_role": "expert"}  # ä¼ å…¥ä¸“å®¶è§’è‰²ä¸Šä¸‹æ–‡
    )
    print("ä¸“å®¶æ¨¡å¼å›å¤:", result1["messages"][-1].content)
    
    # æµ‹è¯•æ–°æ‰‹è§’è‰²
    print("\n=== æµ‹è¯•2ï¼šæ–°æ‰‹è§’è‰² ===")
    result2 = agent.invoke(
        {"messages": [{"role": "user", "content": "è§£é‡Šæœºå™¨å­¦ä¹ çš„åŸç†"}]},
        context={"user_role": "beginner"}  # ä¼ å…¥æ–°æ‰‹è§’è‰²ä¸Šä¸‹æ–‡
    )
    print("æ–°æ‰‹æ¨¡å¼å›å¤:", result2["messages"][-1].content)
    
    # æµ‹è¯•é»˜è®¤è§’è‰²
    print("\n=== æµ‹è¯•3ï¼šé»˜è®¤è§’è‰² ===")
    result3 = agent.invoke(
        {"messages": [{"role": "user", "content": "è§£é‡Šæœºå™¨å­¦ä¹ çš„åŸç†"}]}
        # ä¸ä¼ å…¥ä¸Šä¸‹æ–‡ï¼Œä½¿ç”¨é»˜è®¤è§’è‰²
    )
    print("é»˜è®¤æ¨¡å¼å›å¤:", result3["messages"][-1].content)
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
åŠ¨æ€æç¤ºä¸­é—´ä»¶åˆ›å»ºå®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•ä¸åŒè§’è‰²çš„ç³»ç»Ÿæç¤º...
=== æµ‹è¯•1ï¼šä¸“å®¶è§’è‰² ===
ä¸“å®¶æ¨¡å¼å›å¤: å¥½çš„ï¼Œæˆ‘å°†è¯¦ç»†è§£é‡Šæœºå™¨å­¦ä¹ çš„åŸç†ï¼Œæ¶µç›–å…¶æ ¸å¿ƒæ€æƒ³ã€å…³é”®ç»„æˆéƒ¨åˆ†ã€ä¸»è¦èŒƒå¼å’Œå·¥ä½œæµç¨‹ã€‚

### ä¸€ã€ æ ¸å¿ƒæ€æƒ³ï¼šä»æ•°æ®ä¸­å­¦ä¹ æ¨¡å¼

æœºå™¨å­¦ä¹ çš„æ ¹æœ¬åŸç†æ˜¯è®©è®¡ç®—æœº**ä¸é€šè¿‡æ˜¾å¼ç¼–ç¨‹ï¼Œè€Œæ˜¯é€šè¿‡ä»æ•°æ®ä¸­è‡ªåŠ¨å‘ç°è§„å¾‹ï¼ˆæ¨¡å¼ï¼‰å¹¶è¿›è¡Œé¢„æµ‹æˆ–å†³ç­–**ã€‚

*   **ä¼ ç»Ÿç¼–ç¨‹ vs. æœºå™¨å­¦ä¹ **ï¼š
    *   **ä¼ ç»Ÿç¼–ç¨‹**ï¼šè¾“å…¥ **è§„åˆ™** + **æ•°æ®** â†’ è¾“å‡º **ç­”æ¡ˆ**ã€‚
        *   *ä¾‹å¦‚ï¼šç¼–å†™ä¸€ä¸ªè¯†åˆ«çŒ«çš„ç¨‹åºï¼Œéœ€è¦ç¨‹åºå‘˜æ˜ç¡®å®šä¹‰è§„åˆ™ï¼ˆæœ‰èƒ¡é¡»ã€å°–è€³æœµã€å–µå–µå«ç­‰ï¼‰ã€‚*
    *   **æœºå™¨å­¦ä¹ **ï¼šè¾“å…¥ **æ•°æ®** + **ç­”æ¡ˆ** â†’ è¾“å‡º **è§„åˆ™ï¼ˆæ¨¡å‹ï¼‰**ã€‚
        *   *ä¾‹å¦‚ï¼šç»™è®¡ç®—æœºæˆåƒä¸Šä¸‡å¼ â€œçŒ«â€å’Œâ€œéçŒ«â€çš„å›¾ç‰‡ï¼ˆæ•°æ®+æ ‡ç­¾ï¼‰ï¼Œè®©å®ƒè‡ªå·±æ€»ç»“å‡ºçŒ«çš„ç‰¹å¾ï¼Œå½¢æˆè¯†åˆ«æ¨¡å‹ã€‚*

è¿™ä¸ªâ€œå­¦ä¹ â€è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª**ä¼˜åŒ–é—®é¢˜**ï¼šåœ¨åºå¤§çš„â€œå‡è®¾ç©ºé—´â€ä¸­ï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜çš„â€œå‡½æ•°â€æˆ–â€œæ¨¡å‹â€ï¼Œä½¿å¾—å®ƒå¯¹å·²çŸ¥æ•°æ®ï¼ˆè®­ç»ƒæ•°æ®ï¼‰çš„é¢„æµ‹è¯¯å·®æœ€å°ï¼Œå¹¶å¸Œæœ›è¿™ä¸ªæ¨¡å‹å¯¹æœªçŸ¥æ•°æ®ï¼ˆæ–°æ•°æ®ï¼‰ä¹Ÿèƒ½åšå‡ºå‡†ç¡®é¢„æµ‹ï¼Œå³å…·å¤‡**æ³›åŒ–èƒ½åŠ›**ã€‚

---

### äºŒã€ å…³é”®ç»„æˆéƒ¨åˆ†

ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ ç³»ç»ŸåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ï¼š

1.  **æ¨¡å‹**ï¼šå³è¦å­¦ä¹ çš„â€œå‡½æ•°â€ã€‚å®ƒæ˜¯ä¸€ä¸ªå¸¦æœ‰å¯è°ƒå‚æ•°ï¼ˆ`Î¸` æˆ– `w`ï¼‰çš„æ•°å­¦ç»“æ„ã€‚
    *   **ä¸¾ä¾‹**ï¼šçº¿æ€§æ¨¡å‹ `y = wâ‚*xâ‚ + wâ‚‚*xâ‚‚ + b`ï¼Œå…¶ä¸­ `wâ‚`ã€`wâ‚‚`ã€`b` å°±æ˜¯éœ€è¦å­¦ä¹ çš„å‚æ•°ã€‚
    *   **å¤æ‚æ¨¡å‹**ï¼šæ·±åº¦ç¥ç»ç½‘ç»œï¼Œå¯èƒ½åŒ…å«æ•°ç™¾ä¸‡ç”šè‡³æ•°åäº¿ä¸ªå‚æ•°ã€‚

2.  **æŸå¤±å‡½æ•°**ï¼šç”¨äºé‡åŒ–æ¨¡å‹é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´å·®è·çš„æ•°å­¦å‡½æ•°ã€‚å®ƒæ˜¯æ¨¡å‹å¥½åçš„â€œè¯„åˆ†æ ‡å‡†â€ã€‚
    *   **å¸¸è§ç±»å‹**ï¼š
        *   **å‡æ–¹è¯¯å·®**ï¼šç”¨äºå›å½’é—®é¢˜ï¼ˆé¢„æµ‹è¿ç»­å€¼ï¼‰ï¼Œ`MSE = (1/n) * Î£(é¢„æµ‹å€¼ - çœŸå®å€¼)Â²`ã€‚
        *   **äº¤å‰ç†µæŸå¤±**ï¼šç”¨äºåˆ†ç±»é—®é¢˜ï¼ˆé¢„æµ‹ç±»åˆ«ï¼‰ï¼Œè¡¡é‡é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒä¸çœŸå®åˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ã€‚
    *   **æ ¸å¿ƒç›®æ ‡**ï¼š**æœ€å°åŒ–æŸå¤±å‡½æ•°**ã€‚

3.  **ä¼˜åŒ–ç®—æ³•**ï¼šç”¨äºè‡ªåŠ¨è°ƒæ•´æ¨¡å‹å‚æ•°ä»¥æœ€å°åŒ–æŸå¤±å‡½æ•°çš„æ•°å­¦æ–¹æ³•ã€‚
    *   **æœ€æ ¸å¿ƒçš„ç®—æ³•**ï¼š**æ¢¯åº¦ä¸‹é™æ³•åŠå…¶å˜ç§ï¼ˆå¦‚éšæœºæ¢¯åº¦ä¸‹é™ã€Adamï¼‰**ã€‚
    *   **å·¥ä½œåŸç†**ï¼š
        1.  è®¡ç®—æŸå¤±å‡½æ•°å…³äºæ¯ä¸ªæ¨¡å‹å‚æ•°çš„**æ¢¯åº¦**ï¼ˆå³å¯¼æ•°ï¼‰ã€‚æ¢¯åº¦æ–¹å‘æŒ‡ç¤ºäº†æŸå¤±å‡½æ•°**ä¸Šå‡æœ€å¿«**çš„æ–¹å‘ã€‚
        2.  å°†å‚æ•°å‘æ¢¯åº¦çš„**åæ–¹å‘**ç§»åŠ¨ä¸€å°æ­¥ï¼ˆæ­¥é•¿ç”±**å­¦ä¹ ç‡**æ§åˆ¶ï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬è¦æ‰¾çš„æ˜¯æŸå¤±ä¸‹é™çš„æ–¹å‘ã€‚
        3.  é‡å¤æ­¥éª¤1å’Œ2ï¼Œç›´åˆ°æŸå¤±å‡½æ•°æ”¶æ•›åˆ°ä¸€ä¸ªï¼ˆå±€éƒ¨æˆ–å…¨å±€ï¼‰æœ€å°å€¼ã€‚
    *   **ç±»æ¯”**ï¼šå°±åƒè’™çœ¼ä¸‹å±±ï¼Œé€šè¿‡ç”¨è„šæ„Ÿå—æœ€é™¡çš„ä¸‹å¡æ–¹å‘ï¼ˆæ¢¯åº¦ï¼‰ï¼Œç„¶åæœé‚£ä¸ªæ–¹å‘èµ°ä¸€å°æ­¥ï¼ˆå‚æ•°æ›´æ–°ï¼‰ï¼Œæœ€ç»ˆåˆ°è¾¾å±±è°·åº•éƒ¨ï¼ˆæŸå¤±æœ€å°ï¼‰ã€‚

---

### ä¸‰ã€ ä¸»è¦å­¦ä¹ èŒƒå¼

æ ¹æ®å­¦ä¹ æ—¶æ‰€ç”¨çš„â€œæ•°æ®â€å’Œâ€œåé¦ˆâ€å½¢å¼ï¼Œæœºå™¨å­¦ä¹ ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š

1.  **ç›‘ç£å­¦ä¹ **
    *   **åŸç†**ï¼šä½¿ç”¨**å¸¦æœ‰æ ‡ç­¾**çš„æ•°æ®é›†è¿›è¡Œè®­ç»ƒã€‚æ¯ä¸ªè®­ç»ƒæ ·æœ¬éƒ½æ˜¯ä¸€ä¸ª `(è¾“å…¥ç‰¹å¾ï¼Œ ç›®æ ‡æ ‡ç­¾)` å¯¹ã€‚
    *   **ç›®æ ‡**ï¼šå­¦ä¹ ä»è¾“å…¥åˆ°è¾“å‡ºçš„æ˜ å°„å‡½æ•°ã€‚
    *   **ä¸»è¦ä»»åŠ¡**ï¼š
        *   **åˆ†ç±»**ï¼šé¢„æµ‹ç¦»æ•£ç±»åˆ«ï¼ˆå¦‚åƒåœ¾é‚®ä»¶/éåƒåœ¾é‚®ä»¶ã€çŒ«/ç‹—ï¼‰ã€‚
        *   **å›å½’**ï¼šé¢„æµ‹è¿ç»­æ•°å€¼ï¼ˆå¦‚æˆ¿ä»·ã€è‚¡ä»·ï¼‰ã€‚
    *   **å…¸å‹ç®—æ³•**ï¼šçº¿æ€§å›å½’ã€é€»è¾‘å›å½’ã€æ”¯æŒå‘é‡æœºã€å†³ç­–æ ‘ã€éšæœºæ£®æ—ã€ç¥ç»ç½‘ç»œã€‚

2.  **æ— ç›‘ç£å­¦ä¹ **
    *   **åŸç†**ï¼šä½¿ç”¨**æ²¡æœ‰æ ‡ç­¾**çš„æ•°æ®é›†è¿›è¡Œè®­ç»ƒã€‚åªæœ‰è¾“å…¥ç‰¹å¾ï¼Œæ²¡æœ‰ç»™å®šçš„ç­”æ¡ˆã€‚
    *   **ç›®æ ‡**ï¼šå‘ç°æ•°æ®å†…åœ¨çš„ç»“æ„ã€æ¨¡å¼æˆ–åˆ†å¸ƒã€‚
    *   **ä¸»è¦ä»»åŠ¡**ï¼š
        *   **èšç±»**ï¼šå°†æ•°æ®åˆ†ç»„åˆ°ç›¸ä¼¼çš„é›†åˆä¸­ï¼ˆå¦‚å®¢æˆ·ç»†åˆ†ã€æ–°é—»ä¸»é¢˜å‘ç°ï¼‰ã€‚
        *   **é™ç»´**ï¼šåœ¨ä¿ç•™ä¸»è¦ä¿¡æ¯çš„å‰æä¸‹å‡å°‘æ•°æ®ç‰¹å¾æ•°é‡ï¼ˆå¦‚PCAã€t-SNEï¼Œç”¨äºæ•°æ®å¯è§†åŒ–æˆ–é¢„å¤„ç†ï¼‰ã€‚
        *   **å¼‚å¸¸æ£€æµ‹**ï¼šè¯†åˆ«ä¸ä¸»æµæ¨¡å¼æ˜¾è‘—ä¸åŒçš„æ•°æ®ç‚¹ã€‚
    *   **å…¸å‹ç®—æ³•**ï¼šK-Meansã€å±‚æ¬¡èšç±»ã€ä¸»æˆåˆ†åˆ†æã€è‡ªç¼–ç å™¨ã€‚

3.  **å¼ºåŒ–å­¦ä¹ **
    *   **åŸç†**ï¼šæ™ºèƒ½ä½“é€šè¿‡ä¸ç¯å¢ƒ**äº¤äº’è¯•é”™**æ¥å­¦ä¹ ã€‚å®ƒæ¥æ”¶ç¯å¢ƒçš„çŠ¶æ€ï¼Œé‡‡å–è¡ŒåŠ¨ï¼Œå¹¶è·å¾—å¥–åŠ±ï¼ˆæˆ–æƒ©ç½šï¼‰ä½œä¸ºåé¦ˆã€‚
    *   **ç›®æ ‡**ï¼šå­¦ä¹ ä¸€ä¸ª**ç­–ç•¥**ï¼Œä½¿å¾—é•¿æœŸç´¯ç§¯å¥–åŠ±æœ€å¤§åŒ–ã€‚
    *   **æ ¸å¿ƒæ¦‚å¿µ**ï¼š**æ¢ç´¢**ï¼ˆå°è¯•æ–°è¡ŒåŠ¨ï¼‰ä¸**åˆ©ç”¨**ï¼ˆä½¿ç”¨å·²çŸ¥çš„æœ‰æ•ˆè¡ŒåŠ¨ï¼‰çš„æƒè¡¡ã€‚
    *   **å…¸å‹ç®—æ³•**ï¼šQ-Learningã€ç­–ç•¥æ¢¯åº¦ã€æ·±åº¦Qç½‘ç»œã€‚
    *   **åº”ç”¨**ï¼šAlphaGoã€æœºå™¨äººæ§åˆ¶ã€æ¸¸æˆAIã€è‡ªåŠ¨é©¾é©¶å†³ç­–ã€‚

æ­¤å¤–ï¼Œè¿˜æœ‰**åŠç›‘ç£å­¦ä¹ **ï¼ˆå°‘é‡æ ‡ç­¾æ•°æ®+å¤§é‡æ— æ ‡ç­¾æ•°æ®ï¼‰å’Œ**è‡ªç›‘ç£å­¦ä¹ **ï¼ˆä»æ•°æ®æœ¬èº«æ„é€ ç›‘ç£ä¿¡å·ï¼Œå¦‚é¢„æµ‹è¢«é®æŒ¡çš„å›¾åƒéƒ¨åˆ†ï¼‰ç­‰èŒƒå¼ã€‚

---

### å››ã€ æ ‡å‡†å·¥ä½œæµç¨‹

ä¸€ä¸ªå…¸å‹çš„æœºå™¨å­¦ä¹ é¡¹ç›®éµå¾ªä»¥ä¸‹æµç¨‹ï¼š

1.  **é—®é¢˜å®šä¹‰ä¸æ•°æ®æ”¶é›†**ï¼šæ˜ç¡®ä¸šåŠ¡ç›®æ ‡ï¼Œç¡®å®šæ‰€éœ€æ•°æ®å¹¶æ”¶é›†ã€‚
2.  **æ•°æ®æ¢ç´¢ä¸é¢„å¤„ç†**ï¼š
    *   **æ¢ç´¢æ€§æ•°æ®åˆ†æ**ï¼šç†è§£æ•°æ®åˆ†å¸ƒã€ç‰¹å¾é—´å…³ç³»ã€‚
    *   **æ•°æ®æ¸…æ´—**ï¼šå¤„ç†ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ã€é”™è¯¯æ•°æ®ã€‚
    *   **ç‰¹å¾å·¥ç¨‹**ï¼š**è¿™æ˜¯è‡³å…³é‡è¦çš„ä¸€æ­¥**ã€‚åŒ…æ‹¬åˆ›å»ºæ–°ç‰¹å¾ã€è½¬æ¢ç‰¹å¾ï¼ˆå½’ä¸€åŒ–ã€æ ‡å‡†åŒ–ï¼‰ã€ç¼–ç ç±»åˆ«å˜é‡ç­‰ã€‚å¥½çš„ç‰¹å¾èƒ½æå¤§æå‡æ¨¡å‹æ€§èƒ½ã€‚
3.  **æ¨¡å‹é€‰æ‹©ä¸è®­ç»ƒ**ï¼š
    *   æ ¹æ®é—®é¢˜ç±»å‹ï¼ˆåˆ†ç±»/å›å½’/èšç±»ï¼‰å’Œæ•°æ®ç‰¹ç‚¹ï¼Œé€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªå€™é€‰æ¨¡å‹ã€‚
    *   å°†æ•°æ®åˆ’åˆ†ä¸º**è®­ç»ƒé›†**ã€**éªŒè¯é›†**å’Œ**æµ‹è¯•é›†**ã€‚
    *   åœ¨è®­ç»ƒé›†ä¸Šç”¨ä¼˜åŒ–ç®—æ³•ï¼ˆæ¢¯åº¦ä¸‹é™ï¼‰è®­ç»ƒæ¨¡å‹ï¼Œè°ƒæ•´å‚æ•°ã€‚
4.  **æ¨¡å‹è¯„ä¼°ä¸è°ƒä¼˜**ï¼š
    *   åœ¨**éªŒè¯é›†**ä¸Šè¯„ä¼°æ¨¡å‹æ€§èƒ½ï¼Œä½¿ç”¨åˆé€‚çš„è¯„ä¼°æŒ‡æ ‡ï¼ˆå¦‚å‡†ç¡®ç‡ã€ç²¾ç¡®ç‡ã€å¬å›ç‡ã€F1åˆ†æ•°ã€AUCã€RMSEç­‰ï¼‰ã€‚
    *   æ ¹æ®éªŒè¯é›†è¡¨ç°ï¼Œè¿›è¡Œ**è¶…å‚æ•°è°ƒä¼˜**ï¼ˆå¦‚å­¦ä¹ ç‡ã€ç½‘ç»œå±‚æ•°ã€æ ‘çš„æ·±åº¦ï¼‰ï¼Œå¯ä½¿ç”¨ç½‘æ ¼æœç´¢ã€éšæœºæœç´¢æˆ–è´å¶æ–¯ä¼˜åŒ–ç­‰æ–¹æ³•ã€‚
5.  **æ¨¡å‹éƒ¨ç½²ä¸ç›‘æ§**ï¼š
    *   åœ¨**æµ‹è¯•é›†**ï¼ˆä»æœªä½¿ç”¨è¿‡çš„æ•°æ®ï¼‰ä¸Šè¿›è¡Œæœ€ç»ˆè¯„ä¼°ï¼Œç¡®è®¤æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚
    *   å°†æ¨¡å‹éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œæä¾›APIæœåŠ¡æˆ–é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ã€‚
    *   æŒç»­ç›‘æ§æ¨¡å‹åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„æ€§èƒ½ï¼Œå› ä¸ºæ•°æ®åˆ†å¸ƒå¯èƒ½éšæ—¶é—´å˜åŒ–ï¼ˆ**æ¦‚å¿µæ¼‚ç§»**ï¼‰ï¼Œéœ€è¦å®šæœŸé‡æ–°è®­ç»ƒæˆ–æ›´æ–°æ¨¡å‹ã€‚

### äº”ã€ æ ¸å¿ƒæŒ‘æˆ˜ä¸å…³é”®æ¦‚å¿µ

*   **è¿‡æ‹Ÿåˆ**ï¼šæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°æå¥½ï¼Œä½†åœ¨æ–°æ•°æ®ä¸Šè¡¨ç°å¾ˆå·®ã€‚å®ƒâ€œæ­»è®°ç¡¬èƒŒâ€äº†è®­ç»ƒæ•°æ®ï¼ŒåŒ…æ‹¬å™ªå£°ï¼Œè€Œæ²¡æœ‰å­¦åˆ°æ™®é€‚è§„å¾‹ã€‚
    *   **å¯¹ç­–**ï¼šè·å–æ›´å¤šæ•°æ®ã€ä½¿ç”¨æ›´ç®€å•çš„æ¨¡å‹ã€æ­£åˆ™åŒ–ï¼ˆL1/L2ï¼‰ã€Dropoutï¼ˆç”¨äºç¥ç»ç½‘ç»œï¼‰ã€æå‰åœæ­¢ã€‚
*   **æ¬ æ‹Ÿåˆ**ï¼šæ¨¡å‹åœ¨è®­ç»ƒé›†å’Œæ–°æ•°æ®ä¸Šéƒ½è¡¨ç°ä¸ä½³ã€‚å®ƒè¿‡äºç®€å•ï¼Œæ— æ³•æ•æ‰æ•°æ®ä¸­çš„åŸºæœ¬æ¨¡å¼ã€‚
    *   **å¯¹ç­–**ï¼šä½¿ç”¨æ›´å¤æ‚çš„æ¨¡å‹ã€å¢åŠ ç‰¹å¾ã€å‡å°‘æ­£åˆ™åŒ–å¼ºåº¦ã€å»¶é•¿è®­ç»ƒæ—¶é—´ã€‚
*   **åå·®-æ–¹å·®æƒè¡¡**ï¼šè¿™æ˜¯ç†è§£æ¨¡å‹è¯¯å·®æ¥æºçš„æ ¸å¿ƒæ¡†æ¶ã€‚
    *   **åå·®**ï¼šæ¨¡å‹é¢„æµ‹å€¼çš„æœŸæœ›ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ã€‚é«˜åå·®å¯¼è‡´æ¬ æ‹Ÿåˆã€‚
    *   **æ–¹å·®**ï¼šæ¨¡å‹é¢„æµ‹å€¼è‡ªèº«çš„ç¦»æ•£ç¨‹åº¦ã€‚é«˜æ–¹å·®å¯¼è‡´è¿‡æ‹Ÿåˆã€‚
    *   æ€»è¯¯å·® â‰ˆ åå·®Â² + æ–¹å·® + ä¸å¯çº¦è¯¯å·®ã€‚æ¨¡å‹å¤æ‚åº¦çš„é€‰æ‹©å°±æ˜¯åœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—å¹³è¡¡ã€‚

### æ€»ç»“

**æœºå™¨å­¦ä¹ çš„åŸç†**å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š**é€šè¿‡å®šä¹‰æ¨¡å‹ï¼ˆå‡è®¾å‡½æ•°ï¼‰ã€æŸå¤±å‡½æ•°ï¼ˆè¯„ä»·æ ‡å‡†ï¼‰å’Œä¼˜åŒ–ç®—æ³•ï¼ˆå­¦ä¹ æœºåˆ¶ï¼‰ï¼Œåˆ©ç”¨æ•°æ®ï¼ˆå¸¦æ ‡ç­¾æˆ–ä¸å¸¦æ ‡ç­¾ï¼‰è‡ªåŠ¨å¯»æ‰¾èƒ½å¤Ÿå®Œæˆç‰¹å®šä»»åŠ¡ï¼ˆé¢„æµ‹ã€åˆ†ç±»ã€èšç±»ç­‰ï¼‰çš„æœ€ä¼˜æ¨¡å‹å‚æ•°ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯è·å¾—å¼ºå¤§çš„æ³›åŒ–èƒ½åŠ›ï¼Œå¹¶å¯¹æŠ—è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆã€‚**

ä»ç»Ÿè®¡å­¦çš„è§†è§’çœ‹ï¼Œå®ƒæ˜¯ä»æœ‰é™æ ·æœ¬ä¸­ä¼°è®¡æ•°æ®èƒŒåçš„çœŸå®æ¦‚ç‡åˆ†å¸ƒï¼›ä»è®¡ç®—å­¦çš„è§†è§’çœ‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåœ¨é«˜ç»´å‚æ•°ç©ºé—´ä¸­è¿›è¡Œçš„é«˜æ•ˆæœç´¢å’Œä¼˜åŒ–è¿‡ç¨‹ã€‚ç°ä»£æ·±åº¦å­¦ä¹ çš„æˆåŠŸï¼Œæ­£æ˜¯å»ºç«‹åœ¨**å¤§è§„æ¨¡æ•°æ®**ã€**å¼ºå¤§è®¡ç®—èƒ½åŠ›ï¼ˆå¦‚GPUï¼‰** å’Œ**å¤æ‚æ¨¡å‹ï¼ˆæ·±åº¦ç¥ç»ç½‘ç»œï¼‰** è¿™ä¸‰è€…ç»“åˆçš„åŸºç¡€ä¹‹ä¸Šã€‚

=== æµ‹è¯•2ï¼šæ–°æ‰‹è§’è‰² ===
æ–°æ‰‹æ¨¡å¼å›å¤: å¥½çš„ï¼Œæˆ‘å°½é‡ç”¨æœ€ç®€å•çš„æ–¹å¼æ¥è§£é‡Šæœºå™¨å­¦ä¹ çš„åŸç†ã€‚

ä½ å¯ä»¥æŠŠæœºå™¨å­¦ä¹ æƒ³è±¡æˆ**æ•™ä¸€ä¸ªå°å­©è®¤ä¸œè¥¿**ã€‚

**æ ¸å¿ƒæ€æƒ³ï¼š** ä¸æ˜¯ç›´æ¥å‘Šè¯‰ç”µè„‘â€œè¿™æ˜¯ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯ç»™å®ƒçœ‹**å¤§é‡çš„ä¾‹å­**ï¼Œè®©å®ƒè‡ªå·±**ä»ä¾‹å­ä¸­æ€»ç»“å‡ºè§„å¾‹**ï¼Œç„¶åé‡åˆ°æ–°çš„ã€æ²¡è§è¿‡çš„ä¸œè¥¿æ—¶ï¼Œèƒ½æ ¹æ®æ€»ç»“çš„è§„å¾‹åšå‡ºåˆ¤æ–­ã€‚

---

### ä¸€ä¸ªç®€å•çš„æ¯”å–»ï¼šæ•™ç”µè„‘è®¤çŒ«

1.  **å‡†å¤‡â€œæ•™æâ€ï¼ˆæ•°æ®ï¼‰**ï¼š
    *   ä½ æ”¶é›†æˆåƒä¸Šä¸‡å¼ å›¾ç‰‡ï¼Œæ¯å¼ å›¾ç‰‡éƒ½**è´´å¥½æ ‡ç­¾**ï¼šè¿™æ˜¯â€œçŒ«â€ï¼Œé‚£æ˜¯â€œç‹—â€ï¼Œé‚£æ˜¯â€œæ±½è½¦â€ã€‚

2.  **å¼€å§‹â€œå­¦ä¹ â€ï¼ˆè®­ç»ƒæ¨¡å‹ï¼‰**ï¼š
    *   ä½ æŠŠè¿™ä¸€å¤§å †å›¾ç‰‡ç»™ç”µè„‘çœ‹ï¼Œå¹¶å¯¹å®ƒè¯´ï¼šâ€œä½ çœ‹ï¼Œè¿™äº›æœ‰æ¯›èŒ¸èŒ¸çš„è€³æœµã€èƒ¡é¡»ã€åœ†è„¸çš„æ˜¯çŒ«ï¼›é‚£äº›æœ‰é•¿é¼»å­ã€å¤§è€³æœµçš„æ˜¯ç‹—â€¦â€¦â€
    *   ç”µè„‘ï¼ˆå…·ä½“è¯´æ˜¯ä¸€ä¸ªå«â€œ**æ¨¡å‹**â€çš„ç¨‹åºï¼‰ä¸€å¼€å§‹å•¥ä¹Ÿä¸æ‡‚ï¼Œä¼šä¹±çŒœã€‚å®ƒå¯èƒ½æŠŠç‹—è®¤æˆçŒ«ã€‚

3.  **çº æ­£é”™è¯¯ï¼ˆä¼˜åŒ–ç®—æ³•ï¼‰**ï¼š
    *   æ¯æ¬¡å®ƒçŒœé”™ï¼Œä½ å°±å‘Šè¯‰å®ƒï¼šâ€œä¸å¯¹ï¼Œè¿™ä¸ªæ˜¯ç‹—ï¼Œä¸æ˜¯çŒ«ã€‚â€
    *   ç”µè„‘å†…éƒ¨ä¼š**è‡ªåŠ¨è°ƒæ•´**å®ƒåˆ¤æ–­çš„â€œæ ‡å‡†â€ï¼ˆæ¯”å¦‚ï¼Œå®ƒå‘ç°â€œèƒ¡é¡»â€è¿™ä¸ªç‰¹å¾æ¯”â€œå››æ¡è…¿â€å¯¹è¯†åˆ«çŒ«æ›´é‡è¦ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹å°±åƒåœ¨è°ƒæ•´å¤§è„‘é‡Œæ— æ•°ä¸ªå°æ—‹é’®ã€‚

4.  **åå¤ç»ƒä¹ ï¼ˆè¿­ä»£ï¼‰**ï¼š
    *   ä½ è®©å®ƒçœ‹æ— æ•°éå›¾ç‰‡ï¼Œå®ƒå°±ä¸åœåœ°çŒœã€è¢«çº æ­£ã€è°ƒæ•´æ ‡å‡†â€¦â€¦ç»è¿‡æˆåƒä¸Šä¸‡æ¬¡ç»ƒä¹ åï¼Œå®ƒæ€»ç»“å‡ºçš„â€œè®¤çŒ«è§„å¾‹â€è¶Šæ¥è¶Šå‡†ã€‚

5.  **æ¯•ä¸šè€ƒè¯•ï¼ˆé¢„æµ‹/æ¨ç†ï¼‰**ï¼š
    *   ç°åœ¨ï¼Œä½ ç»™å®ƒä¸€å¼ **å®ƒä»æœªè§è¿‡**çš„æ–°çŒ«å›¾ï¼Œä¸å‘Šè¯‰å®ƒç­”æ¡ˆã€‚
    *   ç”µè„‘å°±ä¼šè¿ç”¨å®ƒè‡ªå·±æ€»ç»“å‡ºæ¥çš„é‚£å¥—â€œè§„å¾‹â€æ¥åˆ†æè¿™å¼ æ–°å›¾ï¼šâ€œå—¯ï¼Œæœ‰èƒ¡é¡»ã€æ¯›èŒ¸èŒ¸çš„è€³æœµã€åœ†çœ¼ç›â€¦â€¦ç¬¦åˆæˆ‘å­¦åˆ°çš„â€˜çŒ«â€™çš„ç‰¹å¾ï¼Œæ‰€ä»¥è¿™åº”è¯¥æ˜¯åªçŒ«ã€‚â€
    *   è¿™å°±æ˜¯æœºå™¨å­¦ä¹ çš„æœ€ç»ˆç›®çš„â€”â€”**å¯¹æ–°çš„ã€æœªçŸ¥çš„æ•°æ®åšå‡ºå‡†ç¡®çš„é¢„æµ‹æˆ–åˆ¤æ–­**ã€‚

---

### ä¸‰ä¸ªå…³é”®è¦ç´ ï¼ˆå°±åƒå­¦ä¹ çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼‰ï¼š

1.  **æ•°æ®**ï¼šå­¦ä¹ çš„â€œç‡ƒæ–™â€å’Œâ€œæ•™æâ€ã€‚æ²¡æœ‰å¤§é‡æ•°æ®ï¼Œæœºå™¨å­¦ä¹ å°±æ˜¯æ— ç±³ä¹‹ç‚Šã€‚æ•°æ®è¶Šå¤šã€è´¨é‡è¶Šå¥½ï¼Œé€šå¸¸å­¦å¾—è¶Šå¥½ã€‚
2.  **æ¨¡å‹**ï¼šå­¦ä¹ çš„â€œå¤§è„‘â€æˆ–â€œå…¬å¼â€ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯ä»¥è°ƒæ•´çš„æ•°å­¦æ¡†æ¶ï¼Œç”¨æ¥ä»æ•°æ®ä¸­å¯»æ‰¾è§„å¾‹ã€‚å¸¸è§çš„æ¨¡å‹æœ‰ç¥ç»ç½‘ç»œã€å†³ç­–æ ‘ç­‰ã€‚
3.  **ç®—æ³•**ï¼šå­¦ä¹ çš„â€œæ–¹æ³•â€ã€‚å®ƒæ˜¯å‘Šè¯‰æ¨¡å‹â€œå¦‚ä½•ä»é”™è¯¯ä¸­å­¦ä¹ å¹¶è°ƒæ•´è‡ªå·±â€çš„ä¸€å¥—æ•°å­¦è§„åˆ™ã€‚æœ€è‘—åçš„ç®—æ³•ä¹‹ä¸€å«â€œ**æ¢¯åº¦ä¸‹é™**â€ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆâ€œæ²¿ç€æœ€é™¡çš„ä¸‹å¡è·¯èµ°ï¼Œä»¥æœ€å¿«æ‰¾åˆ°å±±è°·æœ€ä½ç‚¹ï¼ˆé”™è¯¯æœ€å°çš„åœ°æ–¹ï¼‰â€ã€‚

### ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼š

*   **æ¨èç³»ç»Ÿ**ï¼šä½ çœ‹äº†ä¸€äº›ç”µå½±ï¼Œå¹¶æ‰“äº†äº”æ˜Ÿã€‚ç³»ç»Ÿï¼ˆæ¨¡å‹ï¼‰é€šè¿‡åˆ†æ**ä½ çš„è¡Œä¸ºæ•°æ®**ï¼ˆçœ‹äº†ä»€ä¹ˆï¼Œæ‰“äº†å¤šå°‘åˆ†ï¼‰å’Œå…¶ä»–åƒåƒä¸‡ä¸‡ç”¨æˆ·çš„æ•°æ®ï¼Œ**æ€»ç»“å‡ºè§„å¾‹**ï¼šâ€œå–œæ¬¢Aç”µå½±çš„äººï¼Œé€šå¸¸ä¹Ÿå–œæ¬¢Bç”µå½±ã€‚â€ äºæ˜¯å®ƒå°±æŠŠBç”µå½±**æ¨è**ï¼ˆé¢„æµ‹ï¼‰ç»™ä½ ã€‚
*   **åƒåœ¾é‚®ä»¶è¿‡æ»¤**ï¼šç³»ç»Ÿçœ‹äº†æ— æ•°å°è¢«æ ‡è®°ä¸ºâ€œåƒåœ¾â€å’Œâ€œéåƒåœ¾â€çš„é‚®ä»¶ï¼Œå­¦ä¼šäº†è¯†åˆ«åƒåœ¾é‚®ä»¶çš„â€œç‰¹å¾â€ï¼ˆæ¯”å¦‚æŸäº›å…³é”®è¯ã€å‘ä»¶äººåœ°å€ç­‰ï¼‰ã€‚å½“æ–°é‚®ä»¶æ¥æ—¶ï¼Œå®ƒå°±èƒ½è‡ªåŠ¨åˆ¤æ–­å¹¶æŠŠå®ƒå½’åˆ°â€œåƒåœ¾ç®±â€æˆ–â€œæ”¶ä»¶ç®±â€ã€‚
*   **äººè„¸è¯†åˆ«**ï¼šæ‰‹æœºçœ‹äº†ä½ è„¸éƒ¨å„ä¸ªè§’åº¦çš„å¾ˆå¤šç…§ç‰‡ï¼Œå­¦ä¼šäº†â€œä½ çš„è„¸â€çš„å…³é”®ç‰¹å¾ã€‚ä¸‹æ¬¡ä½ è§£é”æ—¶ï¼Œå®ƒå°±èƒ½åˆ¤æ–­å½“å‰è¿™å¼ è„¸æ˜¯ä¸æ˜¯ä½ ã€‚

### æ€»ç»“ä¸€ä¸‹ï¼š

**æœºå™¨å­¦ä¹ çš„åŸç†ï¼Œå°±æ˜¯è®©è®¡ç®—æœºé€šè¿‡åˆ†æå¤§é‡çš„æ•°æ®ï¼Œè‡ªåŠ¨å‘ç°å…¶ä¸­éšè—çš„è§„å¾‹å’Œæ¨¡å¼ï¼Œå¹¶åˆ©ç”¨è¿™ä¸ªè§„å¾‹å¯¹æ–°çš„æƒ…å†µåšå‡ºæ™ºèƒ½çš„å†³ç­–æˆ–é¢„æµ‹ï¼Œè€Œä¸æ˜¯ä»…ä»…æ‰§è¡Œäººç±»é¢„å…ˆå†™å¥½çš„å›ºå®šæŒ‡ä»¤ã€‚**

å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç§**ä»ç»éªŒä¸­å­¦ä¹ **çš„èƒ½åŠ›ï¼Œè€Œè¿™ç§ç»éªŒï¼Œå°±æ˜¯**æ•°æ®**ã€‚

=== æµ‹è¯•3ï¼šé»˜è®¤è§’è‰² ===
é»˜è®¤æ¨¡å¼å›å¤: å¥½çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³äºæœºå™¨å­¦ä¹ åŸç†çš„æ¸…æ™°ã€åˆ†å±‚çš„è§£é‡Šã€‚

### æ ¸å¿ƒæ€æƒ³
æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒåŸç†æ˜¯ï¼š**è®©è®¡ç®—æœºä»æ•°æ®ä¸­è‡ªåŠ¨å­¦ä¹ è§„å¾‹å’Œæ¨¡å¼ï¼Œå¹¶åˆ©ç”¨è¿™äº›å­¦ä¹ åˆ°çš„çŸ¥è¯†å¯¹æ–°çš„ã€æœªè§è¿‡çš„æ•°æ®åšå‡ºé¢„æµ‹æˆ–å†³ç­–ï¼Œè€Œæ— éœ€ä¸ºæ¯ä¸ªç‰¹å®šä»»åŠ¡è¿›è¡Œæ˜ç¡®çš„ã€ç¡¬ç¼–ç çš„ç¼–ç¨‹ã€‚**

æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæ•™ä¸€ä¸ªå­©å­è¯†åˆ«åŠ¨ç‰©ã€‚ä½ ä¸æ˜¯ç›´æ¥å‘Šè¯‰ä»–â€œçŒ«æœ‰å°–è€³æœµã€èƒ¡é¡»å’Œé•¿å°¾å·´â€çš„æ‰€æœ‰è§„åˆ™ï¼Œè€Œæ˜¯ç»™ä»–çœ‹å¾ˆå¤šçŒ«ã€ç‹—ã€å…”å­çš„å›¾ç‰‡ï¼Œå¹¶å‘Šè¯‰ä»–æ¯å¼ å›¾ç‰‡æ˜¯ä»€ä¹ˆã€‚é€šè¿‡åå¤è§‚å¯Ÿä¾‹å­ï¼Œå­©å­çš„å¤§è„‘ï¼ˆæ¨¡å‹ï¼‰ä¼šè‡ªå·±æ€»ç»“å‡ºåŒºåˆ†è¿™äº›åŠ¨ç‰©çš„ç‰¹å¾ï¼ˆæ¨¡å¼ï¼‰ã€‚ä¸‹æ¬¡ä»–çœ‹åˆ°ä¸€å¼ æ–°çš„åŠ¨ç‰©å›¾ç‰‡æ—¶ï¼Œå°±èƒ½æ ¹æ®å­¦åˆ°çš„ç‰¹å¾è¿›è¡Œåˆ¤æ–­ã€‚

---

### åŸºæœ¬åŸç†åˆ†è§£

ä¸€ä¸ªå…¸å‹çš„æœºå™¨å­¦ä¹ è¿‡ç¨‹åŒ…å«ä»¥ä¸‹å‡ ä¸ªå…³é”®éƒ¨åˆ†å’Œæ­¥éª¤ï¼š

#### 1. æ ¸å¿ƒç»„ä»¶
*   **æ•°æ®**ï¼šæœºå™¨å­¦ä¹ çš„åŸºç¡€ã€‚æ•°æ®å¯ä»¥æ˜¯ç»“æ„åŒ–çš„ï¼ˆå¦‚Excelè¡¨æ ¼ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯éç»“æ„åŒ–çš„ï¼ˆå¦‚å›¾åƒã€æ–‡æœ¬ã€éŸ³é¢‘ï¼‰ã€‚æ•°æ®é€šå¸¸åˆ†ä¸ºï¼š
    *   **ç‰¹å¾**ï¼šæè¿°æ•°æ®çš„å±æ€§æˆ–å˜é‡ï¼ˆä¾‹å¦‚ï¼Œåœ¨æˆ¿ä»·é¢„æµ‹ä¸­ï¼Œç‰¹å¾å¯ä»¥æ˜¯é¢ç§¯ã€å§å®¤æ•°é‡ã€åœ°ç†ä½ç½®ï¼‰ã€‚
    *   **æ ‡ç­¾**ï¼šæˆ‘ä»¬æƒ³è¦é¢„æµ‹çš„ç›®æ ‡å€¼ï¼ˆä¾‹å¦‚ï¼Œæˆ¿ä»·æœ¬èº«ï¼‰ã€‚åœ¨æœ‰ç›‘ç£å­¦ä¹ ä¸­è‡³å…³é‡è¦ã€‚
*   **æ¨¡å‹**ï¼šè¿™æ˜¯ä¸€ä¸ªæ•°å­¦å‡½æ•°æˆ–ç®—æ³•ï¼Œå®ƒæ¥æ”¶è¾“å…¥æ•°æ®ï¼ˆç‰¹å¾ï¼‰ï¼Œå¹¶ç»è¿‡å†…éƒ¨è®¡ç®—åäº§ç”Ÿä¸€ä¸ªè¾“å‡ºï¼ˆé¢„æµ‹ï¼‰ã€‚æ¨¡å‹æœ€åˆæ˜¯â€œç©ºç™½â€çš„ï¼Œéœ€è¦é€šè¿‡è®­ç»ƒæ¥è°ƒæ•´å…¶å†…éƒ¨å‚æ•°ã€‚
*   **ç®—æ³•**ï¼šæ˜¯ç”¨äºè®­ç»ƒæ¨¡å‹çš„ç‰¹å®šæ•°å­¦æ–¹æ³•å’Œä¼˜åŒ–è¿‡ç¨‹ã€‚ä¸åŒçš„ç®—æ³•ï¼ˆå¦‚çº¿æ€§å›å½’ã€å†³ç­–æ ‘ã€ç¥ç»ç½‘ç»œï¼‰æ„æˆäº†ä¸åŒâ€œå®¶æ—â€çš„æ¨¡å‹ã€‚

#### 2. æ ¸å¿ƒæ­¥éª¤
**ç¬¬ä¸€æ­¥ï¼šè®­ç»ƒ**
è¿™æ˜¯â€œå­¦ä¹ â€å‘ç”Ÿçš„å…³é”®é˜¶æ®µã€‚
1.  å°†**å¸¦æ ‡ç­¾çš„è®­ç»ƒæ•°æ®**è¾“å…¥åˆ°æ¨¡å‹ä¸­ã€‚
2.  æ¨¡å‹æ ¹æ®å½“å‰å†…éƒ¨å‚æ•°åšå‡ºä¸€ä¸ªé¢„æµ‹ã€‚
3.  è®¡ç®—**é¢„æµ‹å€¼**ä¸çœŸå®**æ ‡ç­¾**ä¹‹é—´çš„å·®è·ï¼Œè¿™ä¸ªå·®è·ç§°ä¸º**æŸå¤±**æˆ–**è¯¯å·®**ã€‚
4.  ä½¿ç”¨**ä¼˜åŒ–ç®—æ³•**ï¼ˆæœ€å¸¸ç”¨çš„æ˜¯**æ¢¯åº¦ä¸‹é™**ï¼‰æ¥è°ƒæ•´æ¨¡å‹çš„å†…éƒ¨å‚æ•°ï¼Œç›®æ ‡æ˜¯**æœ€å°åŒ–æŸå¤±å‡½æ•°**ã€‚
5.  é‡å¤æ­¥éª¤2-4æ— æ•°æ¬¡ï¼Œç›´åˆ°æ¨¡å‹çš„é¢„æµ‹å˜å¾—è¶³å¤Ÿå‡†ç¡®ï¼Œæˆ–è€…è¾¾åˆ°åœæ­¢æ¡ä»¶ã€‚

**ç¬¬äºŒæ­¥ï¼šè¯„ä¼°**
ä½¿ç”¨æ¨¡å‹ä»æœªè§è¿‡çš„**æµ‹è¯•æ•°æ®**æ¥è¯„ä¼°å…¶æ€§èƒ½ã€‚è¿™ç¡®ä¿äº†æ¨¡å‹ä¸æ˜¯ç®€å•åœ°â€œæ­»è®°ç¡¬èƒŒâ€äº†è®­ç»ƒæ•°æ®ï¼ˆè¿™ç§ç°è±¡ç§°ä¸ºâ€œè¿‡æ‹Ÿåˆâ€ï¼‰ï¼Œè€Œæ˜¯çœŸæ­£å­¦åˆ°äº†å¯æ³›åŒ–çš„è§„å¾‹ã€‚

**ç¬¬ä¸‰æ­¥ï¼šé¢„æµ‹/æ¨æ–­**
å°†è®­ç»ƒå’Œè¯„ä¼°å¥½çš„æ¨¡å‹éƒ¨ç½²åˆ°å®é™…åº”ç”¨ä¸­ï¼Œå¯¹æ–°çš„ã€æ— æ ‡ç­¾çš„æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚

---

### ä¸»è¦å­¦ä¹ èŒƒå¼

æ ¹æ®å­¦ä¹ æ—¶æ˜¯å¦æœ‰â€œè€å¸ˆâ€ï¼ˆæ ‡ç­¾ï¼‰çš„æŒ‡å¯¼ï¼Œæœºå™¨å­¦ä¹ ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š

1.  **ç›‘ç£å­¦ä¹ **
    *   **åŸç†**ï¼šä½¿ç”¨**å¸¦æœ‰æ ‡ç­¾**çš„æ•°æ®è¿›è¡Œè®­ç»ƒã€‚æ¨¡å‹å­¦ä¹ ä»è¾“å…¥ç‰¹å¾åˆ°è¾“å‡ºæ ‡ç­¾çš„æ˜ å°„å…³ç³»ã€‚
    *   **ç›®æ ‡**ï¼šè¿›è¡Œ**é¢„æµ‹**ï¼ˆå¦‚åˆ†ç±»ã€å›å½’ï¼‰ã€‚
    *   **ä¾‹å­**ï¼š
        *   **åˆ†ç±»**ï¼šåƒåœ¾é‚®ä»¶è¿‡æ»¤ï¼ˆè¾“å…¥ï¼šé‚®ä»¶å†…å®¹ï¼Œè¾“å‡ºï¼šæ˜¯/å¦åƒåœ¾é‚®ä»¶ï¼‰ã€‚
        *   **å›å½’**ï¼šæˆ¿ä»·é¢„æµ‹ï¼ˆè¾“å…¥ï¼šæˆ¿å±‹ç‰¹å¾ï¼Œè¾“å‡ºï¼šé¢„æµ‹ä»·æ ¼ï¼‰ã€‚

2.  **æ— ç›‘ç£å­¦ä¹ **
    *   **åŸç†**ï¼šä½¿ç”¨**æ²¡æœ‰æ ‡ç­¾**çš„æ•°æ®è¿›è¡Œè®­ç»ƒã€‚æ¨¡å‹è‡ªè¡Œå‘ç°æ•°æ®ä¸­çš„å†…åœ¨ç»“æ„ã€æ¨¡å¼æˆ–åˆ†ç»„ã€‚
    *   **ç›®æ ‡**ï¼šè¿›è¡Œ**å‘ç°**ï¼ˆå¦‚èšç±»ã€é™ç»´ï¼‰ã€‚
    *   **ä¾‹å­**ï¼š
        *   **èšç±»**ï¼šå®¢æˆ·ç»†åˆ†ï¼Œå°†ç”¨æˆ·åˆ†æˆä¸åŒçš„ç¾¤ä½“ã€‚
        *   **é™ç»´**ï¼šå°†é«˜ç»´æ•°æ®å¯è§†åŒ–ï¼Œæˆ–å»é™¤å†—ä½™ç‰¹å¾ã€‚

3.  **å¼ºåŒ–å­¦ä¹ **
    *   **åŸç†**ï¼šä¸€ä¸ªæ™ºèƒ½ä½“ï¼ˆAgentï¼‰é€šè¿‡ä¸ç¯å¢ƒäº’åŠ¨æ¥å­¦ä¹ ã€‚å®ƒé‡‡å–**è¡ŒåŠ¨**ï¼Œè·å¾—**å¥–åŠ±**æˆ–**æƒ©ç½š**ï¼Œç„¶åè°ƒæ•´ç­–ç•¥ä»¥æœ€å¤§åŒ–é•¿æœŸç´¯ç§¯å¥–åŠ±ã€‚
    *   **ç›®æ ‡**ï¼šå­¦ä¹ æœ€ä¼˜çš„**å†³ç­–åºåˆ—**ã€‚
    *   **ä¾‹å­**ï¼šAlphaGoï¼ˆä¸‹å›´æ£‹ï¼‰ã€è‡ªåŠ¨é©¾é©¶ã€æœºå™¨äººæ§åˆ¶ã€‚

---

### ä¸€ä¸ªç”ŸåŠ¨çš„æ¯”å–»ï¼šæ‹Ÿåˆæ›²çº¿

æƒ³è±¡ä½ è¦æ ¹æ®ä¸€äº›ç¦»æ•£çš„æ•°æ®ç‚¹ç”»å‡ºä¸€æ¡æœ€åˆé€‚çš„è¶‹åŠ¿çº¿ã€‚
*   **æ•°æ®ç‚¹** = ä½ çš„è®­ç»ƒæ•°æ®ã€‚
*   **ç”»ä¸€æ¡ç›´çº¿** = é€‰æ‹©ä¸€ä¸ªç®€å•çš„æ¨¡å‹ï¼ˆå¦‚çº¿æ€§å›å½’ï¼‰ã€‚
*   **è°ƒæ•´ç›´çº¿çš„æ–œç‡å’Œä½ç½®** = è®­ç»ƒè¿‡ç¨‹ï¼ˆè°ƒæ•´æ¨¡å‹å‚æ•°ï¼‰ã€‚
*   **çœ‹è¿™æ¡ç›´çº¿ç¦»æ‰€æœ‰ç‚¹çš„å¹³å‡è·ç¦»æœ‰å¤šè¿‘** = è®¡ç®—æŸå¤±ã€‚
*   **ä¸æ–­å¾®è°ƒï¼Œç›´åˆ°ç›´çº¿å°½å¯èƒ½è´´è¿‘æ‰€æœ‰ç‚¹** = æœ€å°åŒ–æŸå¤±å‡½æ•°ã€‚
*   æœ€åï¼Œå¯¹äºä»»ä½•ä¸€ä¸ªæ–°çš„Xå€¼ï¼Œä½ éƒ½å¯ä»¥ç”¨è¿™æ¡ç›´çº¿æ¥é¢„æµ‹Yå€¼ = è¿›è¡Œé¢„æµ‹ã€‚

æ›´å¤æ‚çš„æ¨¡å‹ï¼ˆå¦‚å¤šé¡¹å¼æ›²çº¿ã€ç¥ç»ç½‘ç»œï¼‰å°±åƒæ˜¯ç”¨æ›´çµæ´»çš„çº¿æ¡å»æ‹Ÿåˆæ›´å¤æ‚çš„æ•°æ®æ¨¡å¼ã€‚

### æ€»ç»“

æœºå™¨å­¦ä¹ çš„æœ¬è´¨æ˜¯ **â€œä»æ•°æ®ä¸­å­¦ä¹ ï¼Œç”¨æ¨¡å‹è¡¨è¾¾ï¼Œé€šè¿‡ä¼˜åŒ–é€¼è¿‘çœŸç›¸â€** ã€‚å®ƒé€šè¿‡æ•°æ®é©±åŠ¨çš„æ–¹å¼ï¼Œè®©è®¡ç®—æœºè·å¾—è§£å†³å¤æ‚é—®é¢˜çš„èƒ½åŠ›ï¼Œå…¶å¨åŠ›åœ¨äºèƒ½å¤Ÿå¤„ç†äººç±»éš¾ä»¥æ‰‹åŠ¨ç¼–å†™è§„åˆ™çš„æµ·é‡ã€é«˜ç»´é—®é¢˜ï¼Œå¦‚å›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†å’Œæ¨èç³»ç»Ÿã€‚
```

## äº”ã€è°ƒç”¨æ™ºèƒ½ä½“
**æ­¥éª¤1ï¼šåˆ›å»ºagent_invoke_demo.pyæ–‡ä»¶**

```python
# æ™ºèƒ½ä½“è°ƒç”¨ç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•è°ƒç”¨æ™ºèƒ½ä½“å¹¶å¤„ç†å…¶å“åº”

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from langchain.tools import tool  # ç”¨äºå®šä¹‰å·¥å…·
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº


# å®šä¹‰å·¥å…·
# ä½¿ç”¨@toolè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªæœç´¢å·¥å…·
@tool
def search(query: str) -> str:
    """
    æœç´¢ä¿¡æ¯

    å‚æ•°ï¼š
    - query: strç±»å‹ï¼Œæœç´¢æŸ¥è¯¢è¯

    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œæœç´¢ç»“æœ
    """
    # è¿™é‡Œæ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥é›†æˆçœŸå®çš„æœç´¢å¼•æ“
    # æ”¹è¿›æœç´¢å·¥å…·ï¼Œä½¿å…¶èƒ½å¤„ç†å¤©æ°”æŸ¥è¯¢
    if "å¤©æ°”" in query or "weather" in query.lower():
        # æ¨¡æ‹Ÿå¤©æ°”æœç´¢ç»“æœ
        if "æ—§é‡‘å±±" in query or "san francisco" in query.lower():
            return "æ—§é‡‘å±±å¤©æ°”ï¼šä»Šå¤©æ™´æœ—ï¼Œæ¸©åº¦ 18-22Â°Cï¼Œæ¹¿åº¦ 65%ï¼Œé£é€Ÿ 15 km/hã€‚"
        else:
            return f"æœç´¢åˆ° {query} çš„å¤©æ°”ä¿¡æ¯ï¼šè¯·æŸ¥çœ‹å½“åœ°å¤©æ°”é¢„æŠ¥ã€‚"
    else:
        return f"æœç´¢ç»“æœï¼š{query}"


print("å·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºæ™ºèƒ½ä½“ï¼Œä¼ å…¥æ¨¡å‹å’Œå·¥å…·
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[search]  # ä¼ å…¥æœç´¢å·¥å…·
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•è°ƒç”¨...")

# æµ‹è¯•è°ƒç”¨æ™ºèƒ½ä½“
if __name__ == "__main__":
    print("=== æµ‹è¯•ï¼šåŸºæœ¬è°ƒç”¨ ===")
    # åŸºæœ¬è°ƒç”¨
    result = agent.invoke(
        {"messages": [{"role": "user", "content": "æ—§é‡‘å±±å¤©æ°”å¦‚ä½•ï¼Ÿ"}]}
    )

    # æ‰“å°æ™ºèƒ½ä½“çš„å›å¤
    print("æ™ºèƒ½ä½“å›å¤:", result["messages"][-1].content)

    # åˆ†æå“åº”ç»“æ„
    print("\n=== å“åº”ç»“æ„åˆ†æ ===")
    print(f"å“åº”ç±»å‹: {type(result)}")
    print(f"å“åº”åŒ…å«çš„é”®: {list(result.keys())}")
    print(f"æ¶ˆæ¯æ•°é‡: {len(result['messages'])}")

    # æ‰“å°æ‰€æœ‰æ¶ˆæ¯
    print("\n=== æ‰€æœ‰æ¶ˆæ¯ ===")
    for i, message in enumerate(result['messages']):
        print(f"æ¶ˆæ¯ {i + 1}:")

        # è·å–è§’è‰² - å¤„ç†ä¸åŒçš„æ¶ˆæ¯ç±»å‹
        if hasattr(message, 'type'):
            role = message.type
        elif hasattr(message, 'role'):
            role = message.role
        else:
            role = type(message).__name__

        print(f"  è§’è‰²: {role}")

        # è·å–å†…å®¹
        if hasattr(message, 'content') and message.content:
            print(f"  å†…å®¹: {message.content}")
        else:
            print(f"  å†…å®¹: æ— ")

        # æ£€æŸ¥æ˜¯å¦æœ‰å·¥å…·è°ƒç”¨
        if hasattr(message, 'tool_calls') and message.tool_calls:
            print(f"  å·¥å…·è°ƒç”¨: {message.tool_calls}")
        elif hasattr(message, 'tool_call_id'):
            print(f"  å·¥å…·è°ƒç”¨ID: {message.tool_call_id}")

        print()
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
å·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•è°ƒç”¨...
=== æµ‹è¯•ï¼šåŸºæœ¬è°ƒç”¨ ===
æ™ºèƒ½ä½“å›å¤: æ ¹æ®æœç´¢ç»“æœï¼Œä»Šå¤©æ—§é‡‘å±±çš„å¤©æ°”æƒ…å†µå¦‚ä¸‹ï¼š

- **å¤©æ°”çŠ¶å†µ**ï¼šæ™´æœ—
- **æ¸©åº¦èŒƒå›´**ï¼š18-22Â°C
- **æ¹¿åº¦**ï¼š65%
- **é£é€Ÿ**ï¼š15 km/h

ä»Šå¤©æ—§é‡‘å±±çš„å¤©æ°”ç›¸å½“ä¸é”™ï¼Œæ™´æœ—ä¸”æ¸©åº¦é€‚ä¸­ï¼Œé€‚åˆæˆ·å¤–æ´»åŠ¨ã€‚å»ºè®®æ‚¨æ ¹æ®è¿™ä¸ªæ¸©åº¦èŒƒå›´é€‰æ‹©åˆé€‚çš„è¡£ç‰©ã€‚

=== å“åº”ç»“æ„åˆ†æ ===
å“åº”ç±»å‹: <class 'dict'>
å“åº”åŒ…å«çš„é”®: ['messages']
æ¶ˆæ¯æ•°é‡: 4

=== æ‰€æœ‰æ¶ˆæ¯ ===
æ¶ˆæ¯ 1:
  è§’è‰²: human
  å†…å®¹: æ—§é‡‘å±±å¤©æ°”å¦‚ä½•ï¼Ÿ

æ¶ˆæ¯ 2:
  è§’è‰²: ai
  å†…å®¹: æˆ‘ç›®å‰æ— æ³•è·å–å®æ—¶å¤©æ°”ä¿¡æ¯ï¼Œå› ä¸ºå¤©æ°”æŸ¥è¯¢åŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ã€‚ä¸è¿‡ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨æœç´¢æœ€æ–°çš„æ—§é‡‘å±±å¤©æ°”æƒ…å†µã€‚
  å·¥å…·è°ƒç”¨: [{'name': 'search', 'args': {'query': 'æ—§é‡‘å±±å¤©æ°” ä»Šå¤© å®æ—¶'}, 'id': 'call_00_qd3Aw2Na5kP410JkE1fggDwr', 'type': 'tool_call'}]

æ¶ˆæ¯ 3:
  è§’è‰²: tool
  å†…å®¹: æ—§é‡‘å±±å¤©æ°”ï¼šä»Šå¤©æ™´æœ—ï¼Œæ¸©åº¦ 18-22Â°Cï¼Œæ¹¿åº¦ 65%ï¼Œé£é€Ÿ 15 km/hã€‚
  å·¥å…·è°ƒç”¨ID: call_00_qd3Aw2Na5kP410JkE1fggDwr

æ¶ˆæ¯ 4:
  è§’è‰²: ai
  å†…å®¹: æ ¹æ®æœç´¢ç»“æœï¼Œä»Šå¤©æ—§é‡‘å±±çš„å¤©æ°”æƒ…å†µå¦‚ä¸‹ï¼š

- **å¤©æ°”çŠ¶å†µ**ï¼šæ™´æœ—
- **æ¸©åº¦èŒƒå›´**ï¼š18-22Â°C
- **æ¹¿åº¦**ï¼š65%
- **é£é€Ÿ**ï¼š15 km/h

ä»Šå¤©æ—§é‡‘å±±çš„å¤©æ°”ç›¸å½“ä¸é”™ï¼Œæ™´æœ—ä¸”æ¸©åº¦é€‚ä¸­ï¼Œé€‚åˆæˆ·å¤–æ´»åŠ¨ã€‚å»ºè®®æ‚¨æ ¹æ®è¿™ä¸ªæ¸©åº¦èŒƒå›´é€‰æ‹©åˆé€‚çš„è¡£ç‰©ã€‚
```

****

## å…­ã€é«˜çº§æ¦‚å¿µå®è·µ
### 6.1 ç»“æ„åŒ–è¾“å‡º
#### 6.1.1 ToolStrategy
**æ­¥éª¤1ï¼šåˆ›å»ºstructured_output_tool.pyæ–‡ä»¶**

```python
# ToolStrategyç»“æ„åŒ–è¾“å‡ºç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ToolStrategyè·å–ç»“æ„åŒ–è¾“å‡º

# å¯¼å…¥å¿…è¦çš„åº“
from pydantic import BaseModel  # ç”¨äºå®šä¹‰æ•°æ®æ¨¡å‹
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain.agents.structured_output import ToolStrategy  # ç”¨äºç»“æ„åŒ–è¾“å‡º
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from langchain.tools import tool  # ç”¨äºå®šä¹‰å·¥å…·
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

# å®šä¹‰å·¥å…·
# ä½¿ç”¨@toolè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªæœç´¢å·¥å…·
@tool
def search(query: str) -> str:
    """
    æœç´¢ä¿¡æ¯
    
    å‚æ•°ï¼š
    - query: strç±»å‹ï¼Œæœç´¢æŸ¥è¯¢è¯
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œæœç´¢ç»“æœ
    """
    # è¿™é‡Œæ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥é›†æˆçœŸå®çš„æœç´¢å¼•æ“
    return f"æœç´¢ç»“æœï¼š{query}"

# å®šä¹‰ç»“æ„åŒ–è¾“å‡ºæ¨¡å‹
# ä½¿ç”¨Pydanticçš„BaseModelå®šä¹‰è”ç³»ä¿¡æ¯æ¨¡å‹
class ContactInfo(BaseModel):
    """è”ç³»ä¿¡æ¯æ¨¡å‹"""
    name: str  # å§“å
    email: str  # é‚®ç®±
    phone: str  # ç”µè¯

print("ç»“æ„åŒ–è¾“å‡ºæ¨¡å‹å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºå¸¦ç»“æ„åŒ–è¾“å‡ºçš„æ™ºèƒ½ä½“
# ä½¿ç”¨ToolStrategyæŒ‡å®šç»“æ„åŒ–è¾“å‡ºç­–ç•¥
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[search],  # ä¼ å…¥æœç´¢å·¥å…·
    response_format=ToolStrategy(ContactInfo)  # æŒ‡å®šç»“æ„åŒ–è¾“å‡ºç­–ç•¥
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•ç»“æ„åŒ–è¾“å‡º...")

# æµ‹è¯•ç»“æ„åŒ–è¾“å‡º
if __name__ == "__main__":
    print("=== æµ‹è¯•ï¼šç»“æ„åŒ–è¾“å‡º ===")
    # è°ƒç”¨æ™ºèƒ½ä½“ï¼Œè¯·æ±‚æå–è”ç³»ä¿¡æ¯
    result = agent.invoke({
        "messages": [{"role": "user", "content": "ä»ä»¥ä¸‹å†…å®¹æå–è”ç³»ä¿¡æ¯ï¼šJohn Doe, john@example.com, (555) 123-4567"}]
    })
    
    # æ‰“å°ç»“æ„åŒ–å“åº”
    print("ç»“æ„åŒ–å“åº”:")
    print(result["structured_response"])
    print()
    
    # è®¿é—®ç»“æ„åŒ–å“åº”çš„å­—æ®µ
    print("=== ç»“æ„åŒ–å“åº”å­—æ®µè®¿é—® ===")
    print(f"å§“å: {result['structured_response'].name}")
    print(f"é‚®ç®±: {result['structured_response'].email}")
    print(f"ç”µè¯: {result['structured_response'].phone}")
    print()
    
    # åˆ†æå“åº”ç»“æ„
    print("=== å“åº”ç»“æ„åˆ†æ ===")
    print(f"å“åº”ç±»å‹: {type(result)}")
    print(f"å“åº”åŒ…å«çš„é”®: {list(result.keys())}")
    print(f"ç»“æ„åŒ–å“åº”ç±»å‹: {type(result['structured_response'])}")
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
ç»“æ„åŒ–è¾“å‡ºæ¨¡å‹å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•ç»“æ„åŒ–è¾“å‡º...
=== æµ‹è¯•ï¼šç»“æ„åŒ–è¾“å‡º ===
ç»“æ„åŒ–å“åº”:
name='John Doe' email='john@example.com' phone='(555) 123-4567'

=== ç»“æ„åŒ–å“åº”å­—æ®µè®¿é—® ===
å§“å: John Doe
é‚®ç®±: john@example.com
ç”µè¯: (555) 123-4567

=== å“åº”ç»“æ„åˆ†æ ===
å“åº”ç±»å‹: <class 'dict'>
å“åº”åŒ…å«çš„é”®: ['messages', 'structured_response']
ç»“æ„åŒ–å“åº”ç±»å‹: <class '__main__.ContactInfo'>
```

#### 6.1.2 ProviderStrategy
ä¸ªäººè®¤ä¸ºToolStrategyå·²ç»å¤Ÿç”¨äº†ï¼ŒProviderStrategyå¾ˆå¤šæ¨¡å‹éƒ½ä¸æ”¯æŒï¼Œæ„Ÿå…´è¶£å¯è‡ªè¡Œäº†è§£[https://langchain-doc.cn/v1/python/langchain/agents.html#providerstrategy](https://langchain-doc.cn/v1/python/langchain/agents.html#providerstrategy)

### 6.2 è®°å¿†ï¼ˆè‡ªå®šä¹‰çŠ¶æ€ï¼‰
#### 6.2.1 é€šè¿‡ä¸­é—´ä»¶å®šä¹‰çŠ¶æ€
**æ­¥éª¤1ï¼šåˆ›å»ºstate_middleware_demo.pyæ–‡ä»¶**

```python
# é€šè¿‡ä¸­é—´ä»¶å®šä¹‰çŠ¶æ€ç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•é€šè¿‡ä¸­é—´ä»¶å®šä¹‰å’Œä½¿ç”¨è‡ªå®šä¹‰çŠ¶æ€

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.agents import AgentState  # æ™ºèƒ½ä½“çŠ¶æ€åŸºç±»
from langchain.agents.middleware import AgentMiddleware  # æ™ºèƒ½ä½“ä¸­é—´ä»¶åŸºç±»
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from langchain.tools import tool  # ç”¨äºå®šä¹‰å·¥å…·
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡
from typing import Any  # ç”¨äºç±»å‹æç¤º

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

# å®šä¹‰è‡ªå®šä¹‰çŠ¶æ€
# ç»§æ‰¿AgentStateï¼Œæ·»åŠ user_preferenceså­—æ®µ
class CustomState(AgentState):
    """è‡ªå®šä¹‰æ™ºèƒ½ä½“çŠ¶æ€"""
    user_preferences: dict  # ç”¨æˆ·åå¥½è®¾ç½®

# å®šä¹‰å·¥å…·
# ä½¿ç”¨@toolè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªæ¨èå·¥å…·
@tool
def get_recommendation(topic: str) -> str:
    """
    è·å–æ¨èä¿¡æ¯
    
    å‚æ•°ï¼š
    - topic: strç±»å‹ï¼Œæ¨èä¸»é¢˜
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œæ¨èä¿¡æ¯
    """
    # è¿™é‡Œæ˜¯æ¨¡æ‹Ÿçš„æ¨èä¿¡æ¯ï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥æ ¹æ®ä¸»é¢˜ç”ŸæˆçœŸå®æ¨è
    return f"å…³äº {topic} çš„æ¨èï¼šè¿™æ˜¯ä¸ºæ‚¨ç²¾å¿ƒæŒ‘é€‰çš„å†…å®¹ã€‚"

# åˆ›å»ºè‡ªå®šä¹‰ä¸­é—´ä»¶
# ç»§æ‰¿AgentMiddlewareï¼Œå®šä¹‰è‡ªå®šä¹‰çŠ¶æ€å’Œå·¥å…·
class CustomMiddleware(AgentMiddleware):
    """è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç†è‡ªå®šä¹‰çŠ¶æ€"""
    state_schema = CustomState  # æŒ‡å®šçŠ¶æ€æ¨¡å¼
    tools = [get_recommendation]  # å…³è”çš„å·¥å…·

    def before_model(self, state: CustomState, runtime) -> dict[str, Any] | None:
        """
        æ¨¡å‹è°ƒç”¨å‰çš„å¤„ç†
        
        å‚æ•°ï¼š
        - state: CustomStateç±»å‹ï¼Œå½“å‰çŠ¶æ€
        - runtime: è¿è¡Œæ—¶ä¿¡æ¯
        
        è¿”å›å€¼ï¼š
        - å¯é€‰çš„çŠ¶æ€æ›´æ–°
        """
        # æ‰“å°ç”¨æˆ·åå¥½
        print(f"ç”¨æˆ·åå¥½: {state.get('user_preferences', {})}")
        # å¯ä»¥åœ¨è¿™é‡Œä¿®æ”¹çŠ¶æ€æˆ–æ·»åŠ é¢å¤–ä¿¡æ¯
        return None

print("è‡ªå®šä¹‰ä¸­é—´ä»¶åˆ›å»ºå®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºæ™ºèƒ½ä½“ï¼Œä¼ å…¥æ¨¡å‹å’Œä¸­é—´ä»¶
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[],  # å·¥å…·å°†é€šè¿‡ä¸­é—´ä»¶æ·»åŠ 
    middleware=[CustomMiddleware()]  # ä¼ å…¥è‡ªå®šä¹‰ä¸­é—´ä»¶
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•è‡ªå®šä¹‰çŠ¶æ€...")

# æµ‹è¯•è‡ªå®šä¹‰çŠ¶æ€
if __name__ == "__main__":
    print("=== æµ‹è¯•ï¼šè‡ªå®šä¹‰çŠ¶æ€ ===")
    # è°ƒç”¨æ™ºèƒ½ä½“ï¼Œä¼ å…¥è‡ªå®šä¹‰çŠ¶æ€
    result = agent.invoke({
        "messages": [{"role": "user", "content": "æ¨èä¸€äº›ç”µå½±"}],
        "user_preferences": {"style": "technical", "verbosity": "detailed"},  # ä¼ å…¥ç”¨æˆ·åå¥½
    })
    
    # æ‰“å°æ™ºèƒ½ä½“çš„å›å¤
    print("æ™ºèƒ½ä½“å›å¤:", result["messages"][-1].content)
    
    # åˆ†æå“åº”ç»“æ„
    print("\n=== å“åº”ç»“æ„åˆ†æ ===")
    print(f"å“åº”åŒ…å«çš„é”®: {list(result.keys())}")
    if 'user_preferences' in result:
        print(f"è¿”å›çš„ç”¨æˆ·åå¥½: {result['user_preferences']}")
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
è‡ªå®šä¹‰ä¸­é—´ä»¶åˆ›å»ºå®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•è‡ªå®šä¹‰çŠ¶æ€...
=== æµ‹è¯•ï¼šè‡ªå®šä¹‰çŠ¶æ€ ===
ç”¨æˆ·åå¥½: {'style': 'technical', 'verbosity': 'detailed'}
æ™ºèƒ½ä½“å›å¤: æˆ‘æ¥ä¸ºæ‚¨æ¨èä¸€äº›ç”µå½±ã€‚ä¸è¿‡æˆ‘éœ€è¦çŸ¥é“æ‚¨æƒ³è¦ä»€ä¹ˆç±»å‹çš„ç”µå½±æ¨èï¼Œæ¯”å¦‚ï¼š

- ç§‘å¹»ç”µå½±
- åŠ¨ä½œç”µå½±
- çˆ±æƒ…ç”µå½±
- å–œå‰§ç”µå½±
- æ‚¬ç–‘æƒŠæ‚š
- åŠ¨ç”»ç”µå½±
- ç»å…¸ç”µå½±
- è¿‘æœŸçƒ­é—¨

æˆ–è€…æ‚¨æœ‰ç‰¹å®šçš„ä¸»é¢˜åå¥½å—ï¼Ÿè¯·å‘Šè¯‰æˆ‘æ‚¨æ„Ÿå…´è¶£çš„ç”µå½±ç±»å‹ï¼Œè¿™æ ·æˆ‘å°±èƒ½ä¸ºæ‚¨æä¾›æ›´ç²¾å‡†çš„æ¨èäº†ã€‚

=== å“åº”ç»“æ„åˆ†æ ===
å“åº”åŒ…å«çš„é”®: ['messages', 'user_preferences']
è¿”å›çš„ç”¨æˆ·åå¥½: {'style': 'technical', 'verbosity': 'detailed'}
```

#### 6.2.2 é€šè¿‡state_schemaå®šä¹‰çŠ¶æ€
**æ­¥éª¤1ï¼šåˆ›å»ºstate_schema_demo.pyæ–‡ä»¶**

```python
# é€šè¿‡state_schemaå®šä¹‰çŠ¶æ€ç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•é€šè¿‡state_schemaå‚æ•°å®šä¹‰å’Œä½¿ç”¨è‡ªå®šä¹‰çŠ¶æ€

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.agents import AgentState  # æ™ºèƒ½ä½“çŠ¶æ€åŸºç±»
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from langchain.tools import tool  # ç”¨äºå®šä¹‰å·¥å…·
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

# å®šä¹‰è‡ªå®šä¹‰çŠ¶æ€
# ç»§æ‰¿AgentStateï¼Œæ·»åŠ user_preferenceså­—æ®µ
class CustomState(AgentState):
    """è‡ªå®šä¹‰æ™ºèƒ½ä½“çŠ¶æ€"""
    user_preferences: dict  # ç”¨æˆ·åå¥½è®¾ç½®

# å®šä¹‰å·¥å…·
# ä½¿ç”¨@toolè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªæ¨èå·¥å…·
@tool
def get_recommendation(topic: str) -> str:
    """
    è·å–æ¨èä¿¡æ¯
    
    å‚æ•°ï¼š
    - topic: strç±»å‹ï¼Œæ¨èä¸»é¢˜
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œæ¨èä¿¡æ¯
    """
    # è¿™é‡Œæ˜¯æ¨¡æ‹Ÿçš„æ¨èä¿¡æ¯ï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥æ ¹æ®ä¸»é¢˜ç”ŸæˆçœŸå®æ¨è
    return f"å…³äº {topic} çš„æ¨èï¼šè¿™æ˜¯ä¸ºæ‚¨ç²¾å¿ƒæŒ‘é€‰çš„å†…å®¹ã€‚"

print("çŠ¶æ€æ¨¡å¼å’Œå·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºæ™ºèƒ½ä½“ï¼Œä¼ å…¥æ¨¡å‹ã€å·¥å…·å’ŒçŠ¶æ€æ¨¡å¼
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[get_recommendation],  # ä¼ å…¥æ¨èå·¥å…·
    state_schema=CustomState  # æŒ‡å®šè‡ªå®šä¹‰çŠ¶æ€æ¨¡å¼
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•è‡ªå®šä¹‰çŠ¶æ€...")

# æµ‹è¯•è‡ªå®šä¹‰çŠ¶æ€
if __name__ == "__main__":
    print("=== æµ‹è¯•ï¼šè‡ªå®šä¹‰çŠ¶æ€ ===")
    # è°ƒç”¨æ™ºèƒ½ä½“ï¼Œä¼ å…¥è‡ªå®šä¹‰çŠ¶æ€
    result = agent.invoke({
        "messages": [{"role": "user", "content": "æ¨èä¸€äº›ä¹¦ç±"}],
        "user_preferences": {"style": "technical", "verbosity": "detailed"},  # ä¼ å…¥ç”¨æˆ·åå¥½
    })
    
    # æ‰“å°æ™ºèƒ½ä½“çš„å›å¤
    print("æ™ºèƒ½ä½“å›å¤:", result["messages"][-1].content)
    
    # åˆ†æå“åº”ç»“æ„
    print("\n=== å“åº”ç»“æ„åˆ†æ ===")
    print(f"å“åº”åŒ…å«çš„é”®: {list(result.keys())}")
    if 'user_preferences' in result:
        print(f"è¿”å›çš„ç”¨æˆ·åå¥½: {result['user_preferences']}")
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
çŠ¶æ€æ¨¡å¼å’Œå·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•è‡ªå®šä¹‰çŠ¶æ€...
=== æµ‹è¯•ï¼šè‡ªå®šä¹‰çŠ¶æ€ ===
æ™ºèƒ½ä½“å›å¤: æˆ‘å¯ä»¥ä¸ºæ‚¨æ¨èä¸€äº›ä¹¦ç±ï¼Œä¸è¿‡éœ€è¦çŸ¥é“æ‚¨æ„Ÿå…´è¶£çš„ä¸»é¢˜æˆ–ç±»å‹ã€‚æ¯”å¦‚ï¼š

- å°è¯´ç±»ï¼ˆæ–‡å­¦ã€ç§‘å¹»ã€æ‚¬ç–‘ç­‰ï¼‰
- éè™šæ„ç±»ï¼ˆå†å²ã€ä¼ è®°ã€ç§‘æ™®ç­‰ï¼‰
- è‡ªæˆ‘æå‡ç±»ï¼ˆå¿ƒç†å­¦ã€å•†ä¸šã€æŠ€èƒ½å­¦ä¹ ç­‰ï¼‰
- æˆ–è€…å…¶ä»–ç‰¹å®šä¸»é¢˜

æ‚¨å¸Œæœ›æˆ‘æ¨èå“ªä¸€ç±»çš„ä¹¦ç±å‘¢ï¼Ÿ

=== å“åº”ç»“æ„åˆ†æ ===
å“åº”åŒ…å«çš„é”®: ['messages', 'user_preferences']
è¿”å›çš„ç”¨æˆ·åå¥½: {'style': 'technical', 'verbosity': 'detailed'}
```

### 6.3 æµå¼ä¼ è¾“
**æ­¥éª¤1ï¼šåˆ›å»ºstreaming_demo.pyæ–‡ä»¶**

```python
# æµå¼ä¼ è¾“ç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨æµå¼ä¼ è¾“è·å–æ™ºèƒ½ä½“çš„å®æ—¶å“åº”

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.agents import create_agent  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from langchain.tools import tool  # ç”¨äºå®šä¹‰å·¥å…·
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

# å®šä¹‰å·¥å…·
# ä½¿ç”¨@toolè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªæœç´¢å·¥å…·
@tool
def search(query: str) -> str:
    """
    æœç´¢ä¿¡æ¯
    
    å‚æ•°ï¼š
    - query: strç±»å‹ï¼Œæœç´¢æŸ¥è¯¢è¯
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œæœç´¢ç»“æœ
    """
    # è¿™é‡Œæ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥é›†æˆçœŸå®çš„æœç´¢å¼•æ“
    return f"æœç´¢ç»“æœï¼š{query} - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ"

print("å·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...")

# åˆ›å»ºChatDeepSeekæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",  # æ¨¡å‹åç§°
    api_key=api_key  # ä¼ å…¥APIå¯†é’¥
)

# åˆ›å»ºæ™ºèƒ½ä½“ï¼Œä¼ å…¥æ¨¡å‹å’Œå·¥å…·
agent = create_agent(
    model=model,  # æ¨¡å‹å®ä¾‹
    tools=[search]  # ä¼ å…¥æœç´¢å·¥å…·
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•æµå¼ä¼ è¾“...")

# æµ‹è¯•æµå¼ä¼ è¾“
if __name__ == "__main__":
    print("=== æµ‹è¯•ï¼šæµå¼ä¼ è¾“ ===")
    print("æ­£åœ¨æœç´¢AIæ–°é—»å¹¶æ€»ç»“...")
    print()
    
    # ä½¿ç”¨streamæ–¹æ³•è¿›è¡Œæµå¼ä¼ è¾“
    # stream_mode="values"è¡¨ç¤ºæ¯ä¸ªå—åŒ…å«è¯¥æ—¶é—´ç‚¹çš„å®Œæ•´çŠ¶æ€
    for chunk in agent.stream({
        "messages": [{"role": "user", "content": "æœç´¢äººå·¥æ™ºèƒ½æœ€æ–°è¿›å±•å¹¶æ€»ç»“å‘ç°"}]
    }, stream_mode="values"):
        # æ¯ä¸ªå—åŒ…å«è¯¥æ—¶é—´ç‚¹çš„å®Œæ•´çŠ¶æ€
        latest_message = chunk["messages"][-1]  # è·å–æœ€æ–°æ¶ˆæ¯
        
        # æ ¹æ®æ¶ˆæ¯ç±»å‹å¤„ç†
        if latest_message.content:
            # æ–‡æœ¬æ¶ˆæ¯
            print(f"æ™ºèƒ½ä½“ï¼š{latest_message.content}")
        elif hasattr(latest_message, 'tool_calls') and latest_message.tool_calls:
            # å·¥å…·è°ƒç”¨æ¶ˆæ¯
            print(f"æ­£åœ¨è°ƒç”¨å·¥å…·ï¼š{[tc['name'] for tc in latest_message.tool_calls]}")
        elif hasattr(latest_message, 'tool_call_id'):
            # å·¥å…·å“åº”æ¶ˆæ¯
            print(f"å·¥å…·å“åº”æ”¶åˆ°")
        print()
    
    print("æµå¼ä¼ è¾“å®Œæˆï¼")
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
å·¥å…·å®šä¹‰å®Œæˆï¼Œå¼€å§‹åˆ›å»ºæ¨¡å‹å’Œæ™ºèƒ½ä½“...
æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼Œå¼€å§‹æµ‹è¯•æµå¼ä¼ è¾“...
=== æµ‹è¯•ï¼šæµå¼ä¼ è¾“ ===
æ­£åœ¨æœç´¢AIæ–°é—»å¹¶æ€»ç»“...

æ™ºèƒ½ä½“ï¼šæœç´¢äººå·¥æ™ºèƒ½æœ€æ–°è¿›å±•å¹¶æ€»ç»“å‘ç°

æ™ºèƒ½ä½“ï¼šæˆ‘æ¥ä¸ºæ‚¨æœç´¢äººå·¥æ™ºèƒ½é¢†åŸŸçš„æœ€æ–°è¿›å±•å¹¶è¿›è¡Œæ€»ç»“ã€‚

æ™ºèƒ½ä½“ï¼šæœç´¢ç»“æœï¼šäººå·¥æ™ºèƒ½æœ€æ–°è¿›å±• 2024 2025 æŠ€æœ¯çªç ´ - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ

æ­£åœ¨è°ƒç”¨å·¥å…·ï¼š['search']

æ™ºèƒ½ä½“ï¼šæœç´¢ç»“æœï¼šAIå¤§æ¨¡å‹å‘å±• GPT-5 Gemini Claude æœ€æ–°ç‰ˆæœ¬ - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ

æ­£åœ¨è°ƒç”¨å·¥å…·ï¼š['search']

æ™ºèƒ½ä½“ï¼šæœç´¢ç»“æœï¼šäººå·¥æ™ºèƒ½å¤šæ¨¡æ€ AIè§†é¢‘ç”Ÿæˆ Sora å›¾åƒç”Ÿæˆ - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ

æ­£åœ¨è°ƒç”¨å·¥å…·ï¼š['search']

æ™ºèƒ½ä½“ï¼šæœç´¢ç»“æœï¼šAI Agent è‡ªä¸»æ™ºèƒ½ä½“ å…·èº«æ™ºèƒ½ æœºå™¨äººæŠ€æœ¯ - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ

æ­£åœ¨è°ƒç”¨å·¥å…·ï¼š['search']

æ™ºèƒ½ä½“ï¼šæœç´¢ç»“æœï¼šäººå·¥æ™ºèƒ½ä¼¦ç† AIå®‰å…¨ ç›‘ç®¡æ”¿ç­– å‘å±•è¶‹åŠ¿ - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ

æ™ºèƒ½ä½“ï¼šåŸºäºæœç´¢ç»“æœï¼Œæˆ‘ä¸ºæ‚¨æ€»ç»“äººå·¥æ™ºèƒ½é¢†åŸŸçš„æœ€æ–°è¿›å±•ï¼š

## äººå·¥æ™ºèƒ½æœ€æ–°è¿›å±•æ€»ç»“

### 1. **å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æŒç»­æ¼”è¿›**
- **GPTç³»åˆ—**ï¼šOpenAIæŒç»­æ”¹è¿›æ¨¡å‹ï¼ŒGPT-4.5/GPT-5é¢„è®¡å°†å¸¦æ¥æ›´å¼ºçš„æ¨ç†èƒ½åŠ›å’Œæ›´ä½çš„å¹»è§‰ç‡
- **Geminiç³»åˆ—**ï¼šGoogleçš„Gemini Ultraåœ¨å¤šæ¨¡æ€ç†è§£æ–¹é¢è¡¨ç°çªå‡º
- **Claudeç³»åˆ—**ï¼šAnthropicçš„Claude 3åœ¨å®‰å…¨æ€§å’Œé•¿ä¸Šä¸‹æ–‡å¤„ç†æ–¹é¢é¢†å…ˆ
- **å¼€æºæ¨¡å‹**ï¼šMetaçš„Llamaç³»åˆ—ã€ä¸­å›½çš„é€šä¹‰åƒé—®ã€æ™ºè°±GLMç­‰å¼€æºæ¨¡å‹å¿«é€Ÿå‘å±•

### 2. **å¤šæ¨¡æ€AIçš„é‡å¤§çªç ´**
- **è§†é¢‘ç”Ÿæˆ**ï¼šOpenAIçš„Soraèƒ½å¤Ÿç”Ÿæˆé«˜è´¨é‡ã€è¿è´¯çš„é•¿è§†é¢‘
- **å›¾åƒç”Ÿæˆ**ï¼šMidjourneyã€DALL-E 3ã€Stable Diffusionç­‰å·¥å…·åœ¨å›¾åƒè´¨é‡å’Œå¯æ§æ€§ä¸ŠæŒç»­æå‡
- **éŸ³é¢‘ç”Ÿæˆ**ï¼šAIéŸ³ä¹åˆ›ä½œã€è¯­éŸ³åˆæˆæŠ€æœ¯æ—¥ç›Šæˆç†Ÿ

### 3. **AI Agentä¸è‡ªä¸»æ™ºèƒ½ä½“**
- **è‡ªä¸»å†³ç­–èƒ½åŠ›**ï¼šAIèƒ½å¤Ÿç†è§£å¤æ‚ä»»åŠ¡å¹¶åˆ†è§£æ‰§è¡Œ
- **å·¥å…·ä½¿ç”¨èƒ½åŠ›**ï¼šAIå­¦ä¼šä½¿ç”¨å„ç§å·¥å…·å’ŒAPIå®Œæˆä»»åŠ¡
- **å…·èº«æ™ºèƒ½**ï¼šAIä¸ç‰©ç†ä¸–ç•Œäº¤äº’ï¼Œåº”ç”¨äºæœºå™¨äººã€è‡ªåŠ¨é©¾é©¶ç­‰é¢†åŸŸ

### 4. **æŠ€æœ¯æ¶æ„åˆ›æ–°**
- **MoEæ¶æ„**ï¼šæ··åˆä¸“å®¶æ¨¡å‹æé«˜æ•ˆç‡
- **é•¿ä¸Šä¸‹æ–‡å¤„ç†**ï¼šæ”¯æŒç™¾ä¸‡tokençº§åˆ«çš„ä¸Šä¸‹æ–‡ç†è§£
- **æ¨ç†èƒ½åŠ›æå‡**ï¼šåœ¨æ•°å­¦ã€ç¼–ç¨‹ã€é€»è¾‘æ¨ç†æ–¹é¢æ˜¾è‘—è¿›æ­¥

### 5. **åº”ç”¨åœºæ™¯æ‰©å±•**
- **ç§‘å­¦ç ”ç©¶**ï¼šAIè¾…åŠ©è¯ç‰©å‘ç°ã€ææ–™ç§‘å­¦ã€å¤©æ–‡å­¦ç ”ç©¶
- **æ•™è‚²åŒ»ç–—**ï¼šä¸ªæ€§åŒ–å­¦ä¹ ã€åŒ»ç–—è¯Šæ–­è¾…åŠ©
- **åˆ›æ„äº§ä¸š**ï¼šå†…å®¹åˆ›ä½œã€è®¾è®¡ã€æ¸¸æˆå¼€å‘
- **ä¼ä¸šåº”ç”¨**ï¼šè‡ªåŠ¨åŒ–åŠå…¬ã€æ•°æ®åˆ†æã€å®¢æˆ·æœåŠ¡

### 6. **ä¼¦ç†ä¸å®‰å…¨å‘å±•**
- **AIå¯¹é½ç ”ç©¶**ï¼šç¡®ä¿AIç³»ç»Ÿä¸äººç±»ä»·å€¼è§‚ä¸€è‡´
- **å®‰å…¨æ¡†æ¶**ï¼šå„å›½åˆ¶å®šAIç›‘ç®¡æ”¿ç­–å’Œå®‰å…¨æ ‡å‡†
- **é€æ˜åº¦æå‡**ï¼šæ¨¡å‹å¯è§£é‡Šæ€§ç ”ç©¶å–å¾—è¿›å±•

### 7. **ç¡¬ä»¶ä¸è®¡ç®—ä¼˜åŒ–**
- **ä¸“ç”¨AIèŠ¯ç‰‡**ï¼šTPUã€NPUç­‰ä¸“ç”¨å¤„ç†å™¨æ€§èƒ½æå‡
- **èƒ½æ•ˆä¼˜åŒ–**ï¼šæ¨¡å‹å‹ç¼©ã€é‡åŒ–æŠ€æœ¯é™ä½è®¡ç®—æˆæœ¬
- **è¾¹ç¼˜AI**ï¼šåœ¨è®¾å¤‡ç«¯éƒ¨ç½²è½»é‡çº§æ¨¡å‹

### ä¸»è¦è¶‹åŠ¿ï¼š
1. **æ¨¡å‹è§„æ¨¡ä¸æ•ˆç‡çš„å¹³è¡¡**ï¼šä¸å†å•çº¯è¿½æ±‚å‚æ•°æ•°é‡ï¼Œæ›´æ³¨é‡å®é™…æ•ˆèƒ½
2. **å¤šæ¨¡æ€èåˆ**ï¼šæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘çš„ç»Ÿä¸€ç†è§£ä¸ç”Ÿæˆ
3. **ä»æ„ŸçŸ¥åˆ°è¡ŒåŠ¨**ï¼šAIä»ç†è§£ä¸–ç•Œåˆ°ä¸»åŠ¨æ”¹å˜ä¸–ç•Œ
4. **ä¸ªæ€§åŒ–ä¸ä¸“ä¸šåŒ–**ï¼šé’ˆå¯¹ç‰¹å®šé¢†åŸŸä¼˜åŒ–çš„ä¸“ç”¨æ¨¡å‹
5. **äººæœºåä½œ**ï¼šAIä½œä¸ºå¢å¼ºäººç±»èƒ½åŠ›çš„å·¥å…·è€Œéæ›¿ä»£

è¿™äº›è¿›å±•è¡¨æ˜äººå·¥æ™ºèƒ½æ­£ä»å®éªŒå®¤èµ°å‘å®é™…åº”ç”¨ï¼Œåœ¨å„è¡Œå„ä¸šäº§ç”Ÿæ·±è¿œå½±å“ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†æ–°çš„ä¼¦ç†ã€å®‰å…¨å’Œç¤¾ä¼šæŒ‘æˆ˜éœ€è¦åº”å¯¹ã€‚

æµå¼ä¼ è¾“å®Œæˆï¼
```

### 6.4 ä¸­é—´ä»¶
ä¸­é—´ä»¶ä¼šå•å¼€ä¸€ä¸ªå°èŠ‚ä»‹ç»

## ä¸ƒã€å®Œæ•´çš„ç»¼åˆç¤ºä¾‹
**æ­¥éª¤1ï¼šåˆ›å»ºcomplete_demo.pyæ–‡ä»¶**

```python
# LangChainæ™ºèƒ½ä½“å®Œæ•´ç»¼åˆç¤ºä¾‹ï¼ˆDeepSeekï¼‰
# æœ¬ç¤ºä¾‹æ¶µç›–æ•™ç¨‹ä¸­çš„æ‰€æœ‰æ ¸å¿ƒæ¦‚å¿µ

# å¯¼å…¥å¿…è¦çš„åº“
from langchain.agents import create_agent, AgentState  # ç”¨äºåˆ›å»ºæ™ºèƒ½ä½“å’ŒçŠ¶æ€
from langchain_deepseek import ChatDeepSeek  # DeepSeekæ¨¡å‹é›†æˆ
from langchain.tools import tool  # ç”¨äºå®šä¹‰å·¥å…·
from langchain.agents.middleware import wrap_model_call, ModelRequest, ModelResponse  # ç”¨äºåŠ¨æ€æ¨¡å‹é€‰æ‹©
from langchain.agents.structured_output import ToolStrategy  # ç”¨äºç»“æ„åŒ–è¾“å‡º
from pydantic import BaseModel  # ç”¨äºå®šä¹‰æ•°æ®æ¨¡å‹
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
import os  # ç”¨äºè®¿é—®ç¯å¢ƒå˜é‡
from typing import TypedDict  # ç”¨äºç±»å‹åŒ–å­—å…¸

# åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆä».envæ–‡ä»¶ä¸­è¯»å–ï¼‰
load_dotenv()

# ç¡®ä¿APIå¯†é’¥å·²åŠ è½½
api_key = os.getenv("DEEPSEEK_API_KEY")
if not api_key:
    print("é”™è¯¯ï¼šDEEPSEEK_API_KEY ç¯å¢ƒå˜é‡æœªè®¾ç½®")
    exit(1)  # å¦‚æœAPIå¯†é’¥æœªè®¾ç½®ï¼Œé€€å‡ºç¨‹åº

# 1. å®šä¹‰å·¥å…·
print("=== 1. å®šä¹‰å·¥å…· ===")

# æœç´¢å·¥å…·
@tool
def search(query: str) -> str:
    """
    æœç´¢ä¿¡æ¯
    
    å‚æ•°ï¼š
    - query: strç±»å‹ï¼Œæœç´¢æŸ¥è¯¢è¯
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œæœç´¢ç»“æœ
    """
    return f"æœç´¢ç»“æœï¼š{query} - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ"

# å¤©æ°”å·¥å…·
@tool
def get_weather(location: str) -> str:
    """
    è·å–ä½ç½®çš„å¤©æ°”ä¿¡æ¯
    
    å‚æ•°ï¼š
    - location: strç±»å‹ï¼Œä½ç½®åç§°
    
    è¿”å›å€¼ï¼š
    - strç±»å‹ï¼Œå¤©æ°”ä¿¡æ¯
    """
    return f"{location} çš„å¤©æ°”ï¼šæ™´æœ—ï¼Œ25Â°C"

# 2. å®šä¹‰ç»“æ„åŒ–è¾“å‡ºæ¨¡å‹
print("\n=== 2. å®šä¹‰ç»“æ„åŒ–è¾“å‡ºæ¨¡å‹ ===")

class ContactInfo(BaseModel):
    """è”ç³»ä¿¡æ¯æ¨¡å‹"""
    name: str  # å§“å
    email: str  # é‚®ç®±
    phone: str  # ç”µè¯

# 3. å®šä¹‰è‡ªå®šä¹‰çŠ¶æ€
print("\n=== 3. å®šä¹‰è‡ªå®šä¹‰çŠ¶æ€ ===")

class CustomState(AgentState):
    """è‡ªå®šä¹‰æ™ºèƒ½ä½“çŠ¶æ€"""
    user_preferences: dict  # ç”¨æˆ·åå¥½è®¾ç½®

# 4. åˆ›å»ºåŠ¨æ€æ¨¡å‹é€‰æ‹©ä¸­é—´ä»¶
print("\n=== 4. åˆ›å»ºåŠ¨æ€æ¨¡å‹é€‰æ‹©ä¸­é—´ä»¶ ===")

# åˆ›å»ºæ¨¡å‹å®ä¾‹
model = ChatDeepSeek(
    model="deepseek-chat",
    api_key=api_key
)

# åŠ¨æ€æ¨¡å‹é€‰æ‹©ä¸­é—´ä»¶
@wrap_model_call
def dynamic_model_selection(request: ModelRequest, handler) -> ModelResponse:
    """
    æ ¹æ®å¯¹è¯å¤æ‚æ€§é€‰æ‹©æ¨¡å‹
    
    å‚æ•°ï¼š
    - request: ModelRequestç±»å‹ï¼ŒåŒ…å«è¯·æ±‚ä¿¡æ¯
    - handler: å¤„ç†å‡½æ•°
    
    è¿”å›å€¼ï¼š
    - ModelResponseç±»å‹ï¼Œæ¨¡å‹å“åº”
    """
    message_count = len(request.state["messages"])
    print(f"æ¶ˆæ¯æ•°é‡: {message_count}")
    
    # è¿™é‡Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„æ¨¡å‹
    # ç›®å‰æˆ‘ä»¬åªæœ‰ä¸€ä¸ªæ¨¡å‹ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨
    request.model = model
    return handler(request)

# 5. åˆ›å»ºæ™ºèƒ½ä½“
print("\n=== 5. åˆ›å»ºæ™ºèƒ½ä½“ ===")

agent = create_agent(
    model=model,
    tools=[search, get_weather],
    middleware=[dynamic_model_selection],
    system_prompt="ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹ã€‚è¯·ç®€æ´å‡†ç¡®åœ°å›ç­”é—®é¢˜ã€‚"
)

print("æ™ºèƒ½ä½“åˆ›å»ºå®Œæˆï¼")

# 6. æµ‹è¯•å‡½æ•°
print("\n=== 6. å¼€å§‹æµ‹è¯• ===")

def test_agent():
    print("=== LangChainæ™ºèƒ½ä½“ç»¼åˆæµ‹è¯•ï¼ˆDeepSeekæ¨¡å‹ï¼‰===")
    
    # æµ‹è¯•1ï¼šå¤©æ°”æŸ¥è¯¢
    print("\næµ‹è¯•1ï¼šå¤©æ°”æŸ¥è¯¢")
    print("ç”¨æˆ·ï¼šä¸Šæµ·ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ")
    result1 = agent.invoke(
        {"messages": [{"role": "user", "content": "ä¸Šæµ·ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"}]}
    )
    print(f"æ™ºèƒ½ä½“ï¼š{result1['messages'][-1].content}")
    
    # æµ‹è¯•2ï¼šä¿¡æ¯æœç´¢
    print("\næµ‹è¯•2ï¼šä¿¡æ¯æœç´¢")
    print("ç”¨æˆ·ï¼š2024å¹´ä¸–ç•Œæ¯å† å†›æ˜¯è°ï¼Ÿ")
    result2 = agent.invoke(
        {"messages": [{"role": "user", "content": "2024å¹´ä¸–ç•Œæ¯å† å†›æ˜¯è°ï¼Ÿ"}]}
    )
    print(f"æ™ºèƒ½ä½“ï¼š{result2['messages'][-1].content}")
    
    # æµ‹è¯•3ï¼šæµå¼ä¼ è¾“
    print("\næµ‹è¯•3ï¼šæµå¼ä¼ è¾“")
    print("ç”¨æˆ·ï¼šæœç´¢äººå·¥æ™ºèƒ½æœ€æ–°è¿›å±•")
    print("æ­£åœ¨æµå¼è·å–å“åº”...")
    print()
    
    for chunk in agent.stream({
        "messages": [{"role": "user", "content": "æœç´¢äººå·¥æ™ºèƒ½æœ€æ–°è¿›å±•"}]
    }, stream_mode="values"):
        latest_message = chunk["messages"][-1]
        if latest_message.content:
            print(f"æ™ºèƒ½ä½“ï¼š{latest_message.content}")
        elif hasattr(latest_message, 'tool_calls') and latest_message.tool_calls:
            print(f"æ­£åœ¨è°ƒç”¨å·¥å…·ï¼š{[tc['name'] for tc in latest_message.tool_calls]}")
        print()

# 7. è¿è¡Œæµ‹è¯•
if __name__ == "__main__":
    test_agent()
    print("\næ‰€æœ‰æµ‹è¯•å®Œæˆï¼")
```

**æ­¥éª¤2ï¼šè¿è¡Œä»£ç **

```python
=== LangChainæ™ºèƒ½ä½“ç»¼åˆæµ‹è¯•ï¼ˆDeepSeekæ¨¡å‹ï¼‰===

æµ‹è¯•1ï¼šå¤©æ°”æŸ¥è¯¢
ç”¨æˆ·ï¼šä¸Šæµ·ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ
æ¶ˆæ¯æ•°é‡: 1
æ¶ˆæ¯æ•°é‡: 3
æ™ºèƒ½ä½“ï¼šæ ¹æ®æŸ¥è¯¢ç»“æœï¼Œä¸Šæµ·ä»Šå¤©çš„å¤©æ°”æƒ…å†µæ˜¯ï¼š
- **å¤©æ°”çŠ¶å†µ**ï¼šæ™´æœ—
- **æ¸©åº¦**ï¼š25Â°C

ä»Šå¤©ä¸Šæµ·å¤©æ°”ä¸é”™ï¼Œæ™´æœ—ä¸”æ¸©åº¦é€‚å®œï¼Œæ˜¯ä¸ªå¥½å¤©æ°”ï¼

æµ‹è¯•2ï¼šä¿¡æ¯æœç´¢
ç”¨æˆ·ï¼š2024å¹´ä¸–ç•Œæ¯å† å†›æ˜¯è°ï¼Ÿ
æ¶ˆæ¯æ•°é‡: 1
æ¶ˆæ¯æ•°é‡: 3
æ¶ˆæ¯æ•°é‡: 5
æ¶ˆæ¯æ•°é‡: 7
æ™ºèƒ½ä½“ï¼šæ ¹æ®æˆ‘çš„çŸ¥è¯†ï¼Œæˆ‘éœ€è¦æ¾„æ¸…ä¸€ä¸ªé‡è¦ä¿¡æ¯ï¼š

**2024å¹´å¹¶æ²¡æœ‰ä¸¾åŠä¸–ç•Œæ¯è¶³çƒèµ›ã€‚**

ä¸–ç•Œæ¯è¶³çƒèµ›ï¼ˆFIFA World Cupï¼‰çš„ä¸¾åŠæ—¶é—´è¡¨æ˜¯ï¼š
- 2022å¹´ä¸–ç•Œæ¯ï¼šåœ¨å¡å¡”å°”ä¸¾è¡Œï¼Œå† å†›æ˜¯é˜¿æ ¹å»·
- 2026å¹´ä¸–ç•Œæ¯ï¼šå°†åœ¨ç¾å›½ã€åŠ æ‹¿å¤§å’Œå¢¨è¥¿å“¥ä¸¾è¡Œ
- 2030å¹´ä¸–ç•Œæ¯ï¼šå°†åœ¨è¥¿ç­ç‰™ã€è‘¡è„ç‰™å’Œæ‘©æ´›å“¥ä¸¾è¡Œ

ä¸–ç•Œæ¯æ¯4å¹´ä¸¾åŠä¸€æ¬¡ï¼Œæ‰€ä»¥2024å¹´å¹¶ä¸æ˜¯ä¸–ç•Œæ¯å¹´ã€‚ä½ å¯èƒ½æŒ‡çš„æ˜¯å…¶ä»–èµ›äº‹ï¼š
1. **2024å¹´æ¬§æ´²æ¯**ï¼ˆUEFA Euro 2024ï¼‰ï¼šåœ¨å¾·å›½ä¸¾è¡Œï¼Œå† å†›æ˜¯è¥¿ç­ç‰™
2. **2024å¹´ç¾æ´²æ¯**ï¼ˆCopa AmÃ©rica 2024ï¼‰ï¼šåœ¨ç¾å›½ä¸¾è¡Œï¼Œå† å†›æ˜¯é˜¿æ ¹å»·

å¦‚æœä½ æŒ‡çš„æ˜¯å…¶ä»–"ä¸–ç•Œæ¯"èµ›äº‹ï¼ˆå¦‚æ¿çƒä¸–ç•Œæ¯ã€æ©„æ¦„çƒä¸–ç•Œæ¯ç­‰ï¼‰ï¼Œè¯·å‘Šè¯‰æˆ‘å…·ä½“æ˜¯å“ªä¸ªä½“è‚²é¡¹ç›®ï¼Œæˆ‘å¯ä»¥å¸®ä½ æŸ¥è¯¢æ›´å‡†ç¡®çš„ä¿¡æ¯ã€‚

æµ‹è¯•3ï¼šæµå¼ä¼ è¾“
ç”¨æˆ·ï¼šæœç´¢äººå·¥æ™ºèƒ½æœ€æ–°è¿›å±•
æ­£åœ¨æµå¼è·å–å“åº”...

æ™ºèƒ½ä½“ï¼šæœç´¢äººå·¥æ™ºèƒ½æœ€æ–°è¿›å±•

æ¶ˆæ¯æ•°é‡: 1
æ™ºèƒ½ä½“ï¼šæˆ‘æ¥ä¸ºæ‚¨æœç´¢äººå·¥æ™ºèƒ½çš„æœ€æ–°è¿›å±•ã€‚

æ™ºèƒ½ä½“ï¼šæœç´¢ç»“æœï¼šäººå·¥æ™ºèƒ½æœ€æ–°è¿›å±• 2024 2025 - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ

æ¶ˆæ¯æ•°é‡: 3
æ™ºèƒ½ä½“ï¼šè®©æˆ‘æœç´¢æ›´å…·ä½“çš„äººå·¥æ™ºèƒ½æœ€æ–°è¿›å±•ä¿¡æ¯ï¼š

æ™ºèƒ½ä½“ï¼šæœç´¢ç»“æœï¼šAIæœ€æ–°çªç ´ å¤§è¯­è¨€æ¨¡å‹ å¤šæ¨¡æ€AI 2024å¹´è¿›å±• - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ

æ¶ˆæ¯æ•°é‡: 5
æ™ºèƒ½ä½“ï¼šè®©æˆ‘æœç´¢ä¸€äº›å…·ä½“çš„äººå·¥æ™ºèƒ½é¢†åŸŸè¿›å±•ï¼š

æ™ºèƒ½ä½“ï¼šæœç´¢ç»“æœï¼šGPT-5 Gemini 2.0 å¤šæ¨¡æ€AI è‡ªä¸»æ™ºèƒ½ä½“ 2024å¹´AIå‘å±• - è¿™æ˜¯æ¨¡æ‹Ÿçš„æœç´¢ç»“æœ

æ¶ˆæ¯æ•°é‡: 7
æ™ºèƒ½ä½“ï¼šåŸºäºæˆ‘çš„çŸ¥è¯†ï¼Œä»¥ä¸‹æ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸçš„ä¸€äº›æœ€æ–°è¿›å±•ï¼š

## äººå·¥æ™ºèƒ½æœ€æ–°è¿›å±•ï¼ˆ2024-2025ï¼‰

### 1. **å¤§è¯­è¨€æ¨¡å‹å‘å±•**
- **GPT-5/5o**ï¼šOpenAIæœ€æ–°æ¨¡å‹ï¼Œåœ¨å¤šæ¨¡æ€ç†è§£å’Œæ¨ç†èƒ½åŠ›ä¸Šæœ‰æ˜¾è‘—æå‡
- **Gemini 2.0**ï¼šGoogleçš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œåœ¨æ•°å­¦ã€ç¼–ç¨‹å’Œé€»è¾‘æ¨ç†æ–¹é¢è¡¨ç°çªå‡º
- **Claude 3.5**ï¼šAnthropicçš„æ¨¡å‹ï¼Œåœ¨åˆ›æ„å†™ä½œå’Œå¤æ‚ä»»åŠ¡å¤„ç†ä¸Šè¡¨ç°ä¼˜å¼‚

### 2. **å¤šæ¨¡æ€AIçªç ´**
- **è§†é¢‘ç”ŸæˆAI**ï¼šå¦‚Soraã€Runway Gen-3ç­‰ï¼Œèƒ½å¤Ÿç”Ÿæˆé«˜è´¨é‡è§†é¢‘å†…å®¹
- **å›¾åƒåˆ°è§†é¢‘è½¬æ¢**ï¼šAIå¯ä»¥å°†é™æ€å›¾åƒè½¬æ¢ä¸ºåŠ¨æ€è§†é¢‘
- **3Då†…å®¹ç”Ÿæˆ**ï¼šAIèƒ½å¤Ÿç”Ÿæˆä¸‰ç»´æ¨¡å‹å’Œåœºæ™¯

### 3. **è‡ªä¸»æ™ºèƒ½ä½“**
- **AIæ™ºèƒ½ä½“**ï¼šèƒ½å¤Ÿè‡ªä¸»æ‰§è¡Œå¤æ‚ä»»åŠ¡çš„AIç³»ç»Ÿ
- **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šå¤šä¸ªAIæ™ºèƒ½ä½“ååŒå·¥ä½œè§£å†³å¤æ‚é—®é¢˜
- **å…·èº«æ™ºèƒ½**ï¼šAIä¸ç‰©ç†ä¸–ç•Œäº¤äº’çš„èƒ½åŠ›å¢å¼º

### 4. **æ¨ç†èƒ½åŠ›æå‡**
- **æ€ç»´é“¾æ”¹è¿›**ï¼šAIçš„æ¨ç†å’Œé€»è¾‘èƒ½åŠ›æ˜¾è‘—å¢å¼º
- **æ•°å­¦å’Œç§‘å­¦æ¨ç†**ï¼šåœ¨STEMé¢†åŸŸçš„è¡¨ç°å¤§å¹…æå‡
- **ä»£ç ç”Ÿæˆå’Œè°ƒè¯•**ï¼šç¼–ç¨‹èƒ½åŠ›æ¥è¿‘ä¸“ä¸šå¼€å‘è€…æ°´å¹³

### 5. **AIç¡¬ä»¶å‘å±•**
- **ä¸“ç”¨AIèŠ¯ç‰‡**ï¼šå¦‚NVIDIAçš„Blackwellæ¶æ„ã€Googleçš„TPU v5
- **è¾¹ç¼˜AIè®¡ç®—**ï¼šåœ¨è®¾å¤‡ç«¯è¿è¡Œæ›´å¼ºå¤§çš„AIæ¨¡å‹
- **é‡å­è®¡ç®—ä¸AIç»“åˆ**ï¼šæ¢ç´¢é‡å­ä¼˜åŠ¿åœ¨AIä¸­çš„åº”ç”¨

### 6. **AIå®‰å…¨ä¸å¯¹é½**
- **å¯è§£é‡Šæ€§AI**ï¼šæé«˜AIå†³ç­–çš„é€æ˜åº¦å’Œå¯ç†è§£æ€§
- **AIå®‰å…¨ç ”ç©¶**ï¼šé˜²æ­¢AIæ»¥ç”¨å’Œç¡®ä¿å¯¹é½äººç±»ä»·å€¼è§‚
- **çº¢é˜Ÿæµ‹è¯•**ï¼šç³»ç»Ÿæ€§æµ‹è¯•AIçš„å®‰å…¨æ€§å’Œé²æ£’æ€§

### 7. **è¡Œä¸šåº”ç”¨**
- **åŒ»ç–—AI**ï¼šè¯ç‰©å‘ç°ã€ç–¾ç—…è¯Šæ–­ã€ä¸ªæ€§åŒ–æ²»ç–—
- **æ•™è‚²AI**ï¼šä¸ªæ€§åŒ–å­¦ä¹ ã€æ™ºèƒ½è¾…å¯¼ç³»ç»Ÿ
- **ç§‘å­¦ç ”ç©¶**ï¼šAIè¾…åŠ©ç§‘å­¦å‘ç°å’Œå®éªŒè®¾è®¡

è¿™äº›è¿›å±•è¡¨æ˜AIæ­£æœç€æ›´æ™ºèƒ½ã€æ›´é€šç”¨ã€æ›´å®‰å…¨çš„æ–¹å‘å‘å±•ï¼ŒåŒæ—¶åœ¨å„è¡Œä¸šçš„åº”ç”¨ä¹Ÿåœ¨ä¸æ–­æ·±åŒ–ã€‚
```

## å…«ã€æ€»ç»“
æœ¬å®è·µæŒ‡å—å®Œå…¨ä½¿ç”¨DeepSeekæ¨¡å‹è¦†ç›–äº†LangChainæ™ºèƒ½ä½“æ•™ç¨‹ä¸­çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ï¼š

1. **æ¨¡å‹**ï¼šé™æ€æ¨¡å‹å’ŒåŠ¨æ€æ¨¡å‹çš„åˆ›å»ºä¸ä½¿ç”¨
2. **å·¥å…·**ï¼šå·¥å…·çš„å®šä¹‰ã€ä½¿ç”¨å’Œé”™è¯¯å¤„ç†
3. **ç³»ç»Ÿæç¤º**ï¼šé™æ€å’ŒåŠ¨æ€ç³»ç»Ÿæç¤ºçš„é…ç½®
4. **æ™ºèƒ½ä½“è°ƒç”¨**ï¼šåŸºæœ¬è°ƒç”¨æ–¹æ³•å’Œå“åº”å¤„ç†
5. **é«˜çº§æ¦‚å¿µ**ï¼š
    - ç»“æ„åŒ–è¾“å‡ºï¼ˆToolStrategyå’ŒProviderStrategyï¼‰
    - è®°å¿†ï¼ˆè‡ªå®šä¹‰çŠ¶æ€ï¼Œé€šè¿‡ä¸­é—´ä»¶å’Œstate_schemaå®šä¹‰ï¼‰
    - æµå¼ä¼ è¾“
    - ä¸­é—´ä»¶

æ¯ä¸ªéƒ¨åˆ†éƒ½æä¾›äº†è¯¦ç»†çš„ä»£ç ç¤ºä¾‹å’Œè¿è¡Œæ­¥éª¤ï¼Œæ‰€æœ‰ä»£ç éƒ½æœ‰è¯¦ç»†çš„æ³¨é‡Šï¼Œé€‚åˆæ–°æ‰‹å°ç™½è·Ÿéšå®è·µã€‚é€šè¿‡å®Œæˆè¿™äº›ç¤ºä¾‹ï¼Œä½ å°†æŒæ¡ä½¿ç”¨DeepSeekæ¨¡å‹æ„å»ºLangChainæ™ºèƒ½ä½“çš„æ ¸å¿ƒåŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ã€‚

## ä¹ã€å‚è€ƒèµ„æº
+ [LangChainå®˜æ–¹æ–‡æ¡£](https://python.langchain.com/)
+ [DeepSeek APIæ–‡æ¡£](https://platform.deepseek.com/)
+ [LangChainä¸­æ–‡æ–‡æ¡£](https://langchain-doc.cn/)

ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼

